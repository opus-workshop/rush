id: '169'
title: 'SCRIPT-010: unset builtin'
status: open
priority: 2
created_at: 2026-01-30T18:49:25.382527Z
updated_at: 2026-01-30T18:49:25.382527Z
description: |-
  As a script writer, I need the unset builtin to remove variables and functions.

  ## Priority: P1 - HIGH
  Needed for cleanup and variable management.

  ## Acceptance Criteria
  - [ ] `unset var` removes variable
  - [ ] `unset -v var` removes variable (explicit)
  - [ ] `unset -f func` removes function
  - [ ] Multiple arguments: `unset a b c`
  - [ ] No error if variable doesn't exist
  - [ ] Cannot unset readonly variables
  - [ ] cargo test passes
  - [ ] cargo build --release succeeds
  - [ ] cargo clippy -- -D warnings passes

  ## Use Cases
  ```bash
  # Remove variable
  export TEMP_VAR=value
  echo $TEMP_VAR  # value
  unset TEMP_VAR
  echo $TEMP_VAR  # empty

  # Remove multiple
  a=1 b=2 c=3
  unset a b c

  # Remove function
  myfunc() { echo hello; }
  unset -f myfunc
  myfunc  # command not found

  # Cleanup pattern
  trap 'unset TEMP_DIR TEMP_FILE' EXIT
  ```

  ## Technical Implementation
  - Add to src/builtins/mod.rs
  - Runtime.remove_variable(name)
  - Runtime.remove_function(name) (when functions exist)
  - Check readonly status before removing

  ## Testing
  - Unset variable
  - Unset multiple variables
  - Unset function
  - Unset nonexistent (no error)
  - Readonly protection

  ## Estimated Effort: 1 day
labels:
- builtin
- p1
- scripting
verify: 'cargo build --release && cargo test && cargo clippy -- -D warnings && ./tests/smoke_test.sh 2>/dev/null || echo "Smoke tests not available"'
