id: '91'
title: 'POSIX-003: Re-enable and test shift builtin'
status: open
priority: 1
created_at: 2026-01-30T18:49:24.759263Z
updated_at: 2026-01-30T18:49:24.759263Z
description: |-
  Re-enable the `shift` builtin for shifting positional parameters.

  ## Context
  The `shift` builtin exists at `src/builtins/shift.rs` but is commented out. Essential for processing script arguments.

  ## Acceptance Criteria
  - Uncomment `shift` module in src/builtins/mod.rs
  - Uncomment shift builtin registration
  - Test basic shift: shifts $2→$1, $3→$2, etc.
  - Test shift N (shift by N positions)
  - Test shift with no positional params (should error)
  - Test shift beyond available params (should error)
  - Test $# is decremented correctly
  - Test shift in functions vs global scope
  - Add integration tests
  - Update help text

  ## POSIX Requirements
  - Shift positional parameters to the left by N (default 1)
  - $1 is deleted, $2 becomes $1, etc.
  - $# is decremented by N
  - Exit code 0 on success, >0 if N > $#

  ## Files to Modify
  - src/builtins/mod.rs (uncomment)
  - src/builtins/shift.rs (verify implementation)
  - src/runtime/mod.rs (verify positional_params handling)
  - tests/positional_param_tests.rs or similar (add tests)

  ## Estimated Effort
  30-40k tokens (re-enable, test, fix issues)
verify: cargo build --release && cargo test && cargo clippy -- -D warnings
labels:
- builtin
- critical
- parameters
- posix
