id: '85'
title: 'POSIX-023: Implement SIGCHLD handler'
status: open
priority: 2
created_at: 2026-01-30T18:49:24.721005Z
updated_at: 2026-01-30T18:49:24.721005Z
description: |-
  Implement SIGCHLD signal handler for automatic zombie process reaping.

  ## Context
  When background jobs exit, they become zombies until wait() is called. SIGCHLD handler allows async reaping.

  ## Acceptance Criteria
  - Install SIGCHLD signal handler
  - Handler calls waitpid(-1, WNOHANG) to reap zombies
  - Update job status asynchronously (Running â†’ Done/Terminated)
  - Test background job exit is detected automatically
  - Test zombie processes are reaped
  - Test job status updates without explicit wait
  - Ensure thread-safety of job status updates
  - Add integration tests
  - Document SIGCHLD handling

  ## POSIX Requirements
  - SIGCHLD sent when child process exits or stops
  - Shell should reap zombie processes
  - Job status should update automatically
  - wait builtin can still be used to wait explicitly

  ## Files to Modify
  - src/signal.rs (add SIGCHLD handler)
  - src/jobs/mod.rs (update job status from signal handler)
  - Ensure atomic/thread-safe job status updates
  - tests/sigchld_tests.rs (add tests)

  ## Estimated Effort
  50-60k tokens (implement signal handler, thread-safe updates, add tests)
labels:
- important
- posix
- processes
- signals
verify: 'cargo build --release && cargo test && cargo clippy -- -D warnings'
