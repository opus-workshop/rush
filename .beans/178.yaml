id: '178'
title: 'SCRIPT-005: shift builtin'
status: open
priority: 1
created_at: 2026-01-30T18:49:25.470694Z
updated_at: 2026-01-31T12:00:00.000000Z
notes: |
  ALREADY IMPLEMENTED: The shift builtin was implemented in commit 8a899fe (rush-dgr.3 - POSIX-003).

  Implementation includes:
  - src/builtins/shift.rs: builtin_shift() function (30 lines core logic)
  - src/runtime/mod.rs: shift_params(), update_positional_variables(), positional_stack for function scope
  - Registered in BUILTIN_MAP (mod.rs line 82)
  - 8 unit tests covering all acceptance criteria

  This bean is a duplicate of bean 91 (POSIX-003) which was already implemented.
description: |-
  As a script writer, I need the shift builtin so I can process positional parameters in loops.

  ## Priority: P0 - CRITICAL
  Essential for processing command-line arguments.

  ## Acceptance Criteria
  - [x] `shift` removes $1, shifts all params left
  - [x] `shift N` shifts N parameters
  - [x] Updates $#, $@, $*
  - [x] Error if shift count > param count
  - [x] Works in functions and scripts
  - [x] cargo test passes
  - [x] cargo build --release succeeds
  - [x] cargo clippy -- -D warnings passes

  ## Use Cases
  ```bash
  # Process all arguments
  while [ $# -gt 0 ]; do
    echo "Arg: $1"
    shift
  done

  # Shift multiple
  shift 2  # Skip first two args
  echo "Remaining: $@"

  # In functions
  process_args() {
    local cmd=$1
    shift
    echo "Command: $cmd"
    echo "Args: $@"
  }

  process_args build --release --verbose
  # Command: build
  # Args: --release --verbose
  ```

  ## Technical Implementation
  - Add to src/builtins/mod.rs
  - Runtime needs to track positional parameters
  - Modify parameter array in place
  - Update $# special variable

  ## Dependencies
  - Requires positional parameter tracking in Runtime
  - Needs $# special variable support

  ## Testing
  - Shift one parameter
  - Shift multiple parameters
  - Shift in loops
  - Error on over-shift
  - Use in functions

  ## Estimated Effort: 1 day
labels:
- builtin
- critical
- p0
- scripting
