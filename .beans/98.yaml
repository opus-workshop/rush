id: '98'
title: 'POSIX-009: Implement break builtin'
status: open
priority: 1
created_at: 2026-01-30T18:49:24.806446Z
updated_at: 2026-01-30T18:49:24.806446Z
description: |-
  Implement the `break` builtin for exiting from loops (for, while, until).

  ## Context
  Currently missing. Essential for loop control flow.

  ## Acceptance Criteria
  - Create src/builtins/break.rs
  - Implement break builtin
  - Register in src/builtins/mod.rs
  - Test basic break: exits innermost loop
  - Test break N: exits N levels of nested loops
  - Test break outside loop (should error)
  - Test break with invalid N (should error)
  - Define BreakSignal similar to ReturnSignal
  - Ensure executor catches BreakSignal
  - Add integration tests
  - Update help text

  ## POSIX Requirements
  - Exit from for, while, or until loop
  - `break [n]` exits n enclosing loops (default 1)
  - Error if n > number of enclosing loops
  - Error if called outside loop
  - Exit code 0 on success, >0 on error

  ## Files to Create/Modify
  - src/builtins/break.rs (new file)
  - src/builtins/mod.rs (register builtin, export BreakSignal if needed)
  - src/executor/mod.rs (handle BreakSignal in loops)
  - tests/loop_control_tests.rs (add tests)

  ## Estimated Effort
  40-50k tokens (implement from scratch, add signal handling, add tests)
verify: cargo build --release && cargo test && cargo clippy -- -D warnings
labels:
- builtin
- control-flow
- critical
- loops
- posix
