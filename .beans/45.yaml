id: '45'
title: 'STABILITY-011: Login Shell Initialization'
status: open
priority: 3
created_at: 2026-01-30T18:49:24.484417Z
updated_at: 2026-01-30T18:49:24.484417Z
description: |-
  As a rush user, I need proper login shell initialization so that my environment is set up correctly on login.

  ## Priority: P2 - MEDIUM
  Important for login shell use.

  ## Acceptance Criteria
  - [ ] Sources ~/.rush_profile on login shell
  - [ ] Sources ~/.rushrc on interactive shell
  - [ ] Sets $SHELL environment variable
  - [ ] Sets $TERM if not set
  - [ ] Sets $USER, $HOME correctly
  - [ ] --login flag forces login shell behavior
  - [ ] --no-rc skips config files
  - [ ] cargo test passes (all tests including init tests)
  - [ ] cargo build --release succeeds
  - [ ] cargo clippy -- -D warnings passes

  ## Technical Implementation
  ```rust
  fn run_login_shell() -> Result<()> {
      // Set environment variables
      env::set_var("SHELL", env::current_exe()?);

      // Source profile
      if let Some(profile) = find_profile() {
          source_file(&profile)?;
      }

      // Run interactive
      run_interactive()
  }
  ```

  ## Files to Modify
  - src/main.rs - Add login shell detection and init
  - src/executor/mod.rs - Add source_file function

  ## Testing
  - Test profile sourcing
  - Test environment variable setup
  - Test --login and --no-rc flags

  ## Estimated Effort: 1 day
labels:
- initialization
- p2
- rush
- stability
