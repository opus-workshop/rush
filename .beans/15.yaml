id: '15'
title: Time Builtin with Breakdown
status: open
priority: 2
created_at: 2026-01-30T18:49:24.340613Z
updated_at: 2026-01-30T18:49:24.340613Z
description: "Implement a `time` builtin that shows performance breakdown for commands and pipelines.\n\n## Problem\nUsers want to understand where time is spent. Standard `time` only shows total. Rush should show per-stage breakdown for pipelines.\n\n## Success Criteria\n- `time command` shows execution time\n- Pipeline breakdown: time per stage\n- Differentiates builtin vs external\n- Shows overhead (parsing, piping, etc.)\n- Optional memory usage stats\n- Comparison to bash/zsh (optional)\n- Works with complex pipelines\n- Clean, readable output\n\n## User Stories\n1. As a performance-conscious user, I want to time commands so I can optimize workflows\n2. As a Rush user, I want to see pipeline stage times so I can identify bottlenecks\n3. As a skeptic, I want proof that Rush builtins are faster\n\n## Example Output\n```\n$ time find . -name \"*.rs\" | grep pub | wc -l\n42\n\nTiming:\n  find:      0.9ms (builtin, parallel traversal)\n  grep:      0.4ms (builtin, ripgrep)\n  wc:        0.1ms (builtin)\n  pipeline:  0.2ms (overhead)\n  total:     1.6ms\n  \n  Comparison: bash time = 380ms (237x faster)\n```\n\n## Technical Implementation\n- Add `time` builtin\n- Reuse profiling infrastructure from rush-hn2\n- Track time per pipeline stage\n- Format output clearly\n- Optional: benchmark against bash/zsh inline\n\n## Deliverables\n- `time` builtin command\n- Pipeline timing breakdown\n- Output formatter\n- Integration with profiling system\n- Tests and documentation"
labels:
- builtin
- feature
- hn-feature
- performance
- phase4
verify: 'cargo build --release && cargo test && cargo clippy -- -D warnings && ./tests/smoke_test.sh 2>/dev/null || echo "Smoke tests not available"'
