id: '15.1'
title: Pipeline stage timing breakdown in time builtin
status: open
priority: 2
created_at: 2026-01-31T16:32:02.746490Z
updated_at: 2026-01-31T16:32:02.746490Z
description: |-
  Extend time builtin to show per-stage timing breakdown for pipelines.

  ## What to implement
  - StageBreakdownFormatter for time command output
  - Parse execution trace from profiling infrastructure
  - Format as human-readable table (Stage | Time | Percentage)
  - Support variable-length pipelines

  ## Files to Modify
  - src/builtins/time.rs (add breakdown mode display logic)
  - src/executor/profile.rs (ensure timing data available)

  ## Example Output
  ```
  time ls | grep foo | wc
    ls:       0.9ms (51%)
    grep:     0.4ms (22%)
    wc:       0.2ms (11%)
    pipes:    0.2ms (16%)
    ──────────────────────
    total:    1.7ms
  ```
acceptance: |-
  - time cmd1 | cmd2 | cmd3 shows breakdown of each stage
  - Percentages add up to 100%
  - Works with variable-length pipelines (2-10 stages)
  - Builtin vs external commands indicated
  - Works with profiling infrastructure hooks
  - cargo test passes
parent: '15'
dependencies:
- '15.1'
