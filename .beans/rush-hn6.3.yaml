id: rush-hn6.3
title: Custom completion script loading system
status: open
priority: 2
created_at: 2026-01-31T16:31:46.532576Z
updated_at: 2026-01-31T16:31:46.532576Z
description: |-
  Allow users to extend completions with custom scripts in ~/.rush/completions/.

  ## What to implement
  - CompletionScriptLoader that reads ~/.rush/completions/
  - Simple completion script format (function or array style)
  - Cache loaded scripts for performance
  - Integration with core completion engine

  ## Files to Modify or Create
  - src/completion/loader.rs (new file for script loading)
  - src/completion/engine.rs (register loader as provider)

  ## Script Format (Simple)
  ```bash
  # ~/.rush/completions/my-tool
  completions() {
      echo "option1"
      echo "option2"
      echo "option3"
  }
  ```
acceptance: |-
  - Scripts loaded from ~/.rush/completions/ automatically
  - Format is simple and user-friendly
  - Scripts cached after first load
  - reload_completions builtin refreshes cache
  - Works for any custom command
  - cargo test passes
parent: rush-hn6
dependencies:
- rush-hn6.2
