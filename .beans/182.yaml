id: '182'
title: 'SCRIPT-009: exec builtin'
status: open
priority: 2
created_at: 2026-01-30T18:49:25.510294Z
updated_at: 2026-01-30T18:49:25.510294Z
description: |-
  As a script writer, I need the exec builtin to replace the shell process or redirect file descriptors permanently.

  ## Priority: P1 - HIGH
  Needed for advanced scripting and performance optimization.

  ## Acceptance Criteria
  - [ ] `exec command` replaces shell with command
  - [ ] No return from exec (process replaced)
  - [ ] `exec > file` redirects stdout permanently
  - [ ] `exec 2>&1` redirects stderr to stdout permanently
  - [ ] `exec < file` redirects stdin permanently
  - [ ] Works in scripts and functions
  - [ ] cargo test passes
  - [ ] cargo build --release succeeds
  - [ ] cargo clippy -- -D warnings passes

  ## Use Cases
  ```bash
  # Replace shell with command
  exec ./myprogram args  # Shell exits, myprogram runs

  # Permanent redirection
  exec > output.log 2>&1
  echo "This goes to log"  # All subsequent output to log

  # Redirect stdin
  exec < input.txt
  while read line; do
    echo "$line"
  done

  # Init script pattern
  if [ -f ./server ]; then
    exec ./server  # Replace init with server
  fi
  ```

  ## Technical Implementation
  - Add to src/builtins/mod.rs
  - For command: use std::process::Command::exec() (Unix)
  - For redirects: dup2() file descriptors
  - Store redirect state in Runtime

  ## Platform Notes
  - exec command replacement is Unix-only
  - File descriptor redirection works cross-platform

  ## Testing
  - Exec command (process replacement)
  - Stdout redirection
  - Stderr redirection
  - Stdin redirection
  - Combined redirects

  ## Estimated Effort: 2 days
labels:
- builtin
- p1
- scripting
verify: 'cargo build --release && cargo test && cargo clippy -- -D warnings && ./tests/smoke_test.sh 2>/dev/null || echo "Smoke tests not available"'
