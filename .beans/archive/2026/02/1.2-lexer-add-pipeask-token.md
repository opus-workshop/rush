id: '1.2'
title: 'Lexer: Add `|?` (PipeAsk) token'
slug: lexer-add-pipeask-token
status: closed
priority: 1
created_at: 2026-02-03T08:38:26.124740Z
updated_at: 2026-02-03T08:39:26.763860Z
description: "Add lexer support for the `|?` operator.\n\n## File: `src/lexer/mod.rs`\n\nAdd new token variant:\n```rust\n#[derive(Logos, Debug, PartialEq, Clone)]\npub enum Token {\n    // ... existing tokens ...\n    \n    /// Pipe to AI: |?\n    #[token(\"|?\")]\n    PipeAsk,\n    \n    // ... rest ...\n}\n```\n\n## Test Cases\n```rust\n#[test]\nfn test_pipe_ask_token() {\n    let tokens = tokenize(\"echo hello |? \\\"summarize\\\"\").unwrap();\n    assert!(tokens.contains(&Token::PipeAsk));\n}\n\n#[test]\nfn test_pipe_ask_with_prompt() {\n    let tokens = tokenize(\"git diff |? \\\"write commit message\\\"\").unwrap();\n    // Should tokenize as: Word, Word, PipeAsk, String\n}\n```"
closed_at: 2026-02-03T08:39:26.763860Z
close_reason: 'Added PipeAsk token variant with #[token("|?")] and two test cases: test_pipe_ask_token and test_pipe_ask_with_prompt'
parent: '1'
verify: cargo test --lib lexer -- --test-threads=1 2>&1 | grep -E "(test.*ok|PASSED|passed)"
claimed_at: 2026-02-03T08:39:03.289726Z
is_archived: true
produces:
- lexer_pipe_ask
