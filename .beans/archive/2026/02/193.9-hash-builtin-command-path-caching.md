id: '193.9'
title: hash builtin - command path caching
slug: hash-builtin-command-path-caching
status: closed
priority: 2
created_at: 2026-02-02T01:09:22.962525Z
updated_at: 2026-02-02T09:39:31.002043Z
description: |-
  Implement the hash builtin for command path caching.

  ## POSIX Specification
  hash [-r] [utility...]

  - With no args: display cached paths
  - With utility names: pre-cache their paths
  - -r: clear the hash table

  ## Purpose
  - Avoid repeated PATH searches for frequently used commands
  - Allow pre-populating cache for known commands
  - Debugging: see what paths shell has cached

  ## Implementation
  - Add hash table to runtime state
  - Integrate with command lookup in executor
  - Clear on PATH change (or use version counter)

  ## Files to Modify
  - src/builtins/hash.rs - new file
  - src/builtins/mod.rs - register builtin
  - src/runtime/mod.rs - hash table storage
  - src/executor/mod.rs - check hash before PATH search
acceptance: hash caches command paths; hash -r clears cache; hash cmd pre-caches; hash shows cached paths
labels:
- posix
- builtin
closed_at: 2026-02-02T09:39:31.002043Z
parent: '193'
verify: cargo test hash_builtin
claimed_at: 2026-02-02T09:39:30.987393Z
is_archived: true
