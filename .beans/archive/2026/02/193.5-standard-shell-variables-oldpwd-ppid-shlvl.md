id: '193.5'
title: Standard shell variables (OLDPWD, PPID, SHLVL)
slug: standard-shell-variables-oldpwd-ppid-shlvl
status: closed
priority: 1
created_at: 2026-02-02T01:08:51.592841Z
updated_at: 2026-02-02T09:38:58.383954Z
description: |-
  Implement standard POSIX shell variables.

  ## Required Variables
  - OLDPWD - previous working directory (set by cd)
  - PPID - parent process ID (readonly)
  - SHLVL - shell nesting level (incremented on subshell)
  - SHELL - path to the shell executable

  ## Implementation
  - OLDPWD: set in cd builtin before changing directory
  - PPID: set at shell startup from getppid()
  - SHLVL: inherit from env, increment, export
  - SHELL: set from argv[0] or /proc/self/exe

  ## Files to Modify
  - src/builtins/cd.rs - set OLDPWD
  - src/runtime/mod.rs - initialize PPID, SHLVL, SHELL
  - src/main.rs - shell startup initialization
acceptance: OLDPWD set on cd; PPID is parent PID; SHLVL increments on nested shells; SHELL is rush path
labels:
- posix
- variables
- runtime
closed_at: 2026-02-02T09:38:58.383954Z
parent: '193'
verify: cargo test shell_variables
claimed_at: 2026-02-02T09:38:58.369455Z
is_archived: true
