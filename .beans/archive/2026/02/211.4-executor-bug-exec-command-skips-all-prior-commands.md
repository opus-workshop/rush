id: '211.4'
title: 'EXECUTOR-BUG: exec command skips all prior commands in sequence'
slug: executor-bug-exec-command-skips-all-prior-commands
status: closed
priority: 1
created_at: 2026-02-02T04:39:36.641934Z
updated_at: 2026-02-02T06:25:39.006124Z
description: |-
  ## Problem
  When exec is present in a command sequence, Rush skips directly to it.

  ## Reproduction
  rush -c 'echo before; exec /bin/echo after'
  Expected: before then after
  Actual: only after (before is skipped!)

  ## Root Cause
  The shell accumulates stdout from all commands and only prints it when
  execute() returns. But exec replaces the process entirely, so the
  accumulated output is never printed.

  ## Fix
  Before executing an exec command, flush any accumulated stdout/stderr
  to the terminal. The is_exec_command() helper detects exec statements.

  ## Impact
  Critical: breaks any script using exec after setup commands.

  ## Expected
  All commands before exec should run normally.
closed_at: 2026-02-02T06:25:39.006124Z
parent: '211'
verify: rush -c 'echo before; exec /bin/echo after' | head -1 | grep -q 'before'
claimed_at: 2026-02-02T05:38:45.865668Z
is_archived: true
