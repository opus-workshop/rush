id: '2.2'
title: 'Tool: 8b_scout - File scouting and context compression'
slug: tool-8bscout-file-scouting-and-context-compression
status: closed
priority: 2
created_at: 2026-02-03T08:50:57.645417Z
updated_at: 2026-02-03T08:53:59.969113Z
description: "## What to implement\nRegister `8b_scout` tool that reads files and returns compressed relevant snippets.\n\n## Files  \n- ~/.pi/agent/extensions/8b-tools/tools/scout.ts\n\n## Interface\n```typescript\npi.registerTool({\n  name: \"8b_scout\",\n  description: \"Read files and extract only relevant snippets for a task. Uses 8B model to compress context.\",\n  parameters: Type.Object({\n    files: Type.Array(Type.String(), { description: \"File paths to scan\" }),\n    task: Type.String({ description: \"What you're trying to accomplish\" }),\n    maxSnippets: Type.Optional(Type.Number({ description: \"Max snippets per file (default 5)\" }))\n  }),\n  async execute(toolCallId, params, signal, onUpdate, ctx) {\n    // 1. Read each file\n    // 2. For each file, call 8B with:\n    //    \"Given this file and task, extract the 3-5 most relevant code snippets. \n    //     Return ONLY the snippets with line numbers, no explanation.\"\n    // 3. Aggregate and return compressed context\n    return {\n      content: [{ type: \"text\", text: compressedSnippets }],\n      details: { \n        filesScanned: files.length,\n        snippetsReturned: n,\n        compressionRatio: originalSize / compressedSize,\n        speedTps: avgSpeed\n      }\n    };\n  }\n});\n```\n\n## Example\n```\nInput: \n  files: [\"src/auth.rs\", \"src/types.rs\", \"src/main.rs\"]\n  task: \"implement JWT validation\"\n\nOutput:\n  \"## src/auth.rs (lines 40-55)\n   pub trait AuthProvider { ... }\n   \n   ## src/types.rs (lines 10-25)  \n   pub struct Claims { ... }\n   \n   ## src/main.rs (lines 100-110)\n   // Current auth setup\n   let provider = ...\"\n```\n\n## Acceptance\n- Tool registered and callable by LLM\n- Reads files in parallel\n- 8B extracts relevant snippets per file\n- Returns compressed context with line numbers\n- Reports compression ratio"
closed_at: 2026-02-03T08:53:59.969113Z
close_reason: Implemented 8b_scout tool with scoutFiles() function. Reads files in parallel, extracts relevant snippets with line numbers, reports compression ratio.
parent: '2'
verify: node -e "const ext = require(process.env.HOME + '/.pi/agent/extensions/8b-tools/index.ts'); ext.toString().includes('8b_scout') || process.exit(1)" 2>/dev/null || grep -q "8b_scout" ~/.pi/agent/extensions/8b-tools/index.ts
claimed_by: pi-agent
claimed_at: 2026-02-03T08:52:54.103641Z
is_archived: true
produces:
- 8b_scout_tool
requires:
- CerebrasClient
