id: '193.3'
title: Case statement fall-through terminators
slug: case-statement-fall-through-terminators
status: closed
priority: 1
created_at: 2026-02-02T01:08:21.663156Z
updated_at: 2026-02-02T09:39:24.248431Z
description: |-
  Implement new case statement terminators from POSIX.1-2024.

  ## POSIX.1-2024 Case Terminators
  - ;; - traditional, stop matching (already implemented)
  - ;& - fall through to next clause and EXECUTE it
  - ;| - fall through to next clause and TEST its pattern

  ## Examples
  ```sh
  case "$x" in
    a) echo "matched a" ;&    # Fall through, execute next
    b) echo "matched b" ;;    # Stop here
  esac

  case "$x" in
    [0-9]) echo "digit" ;|    # Continue testing patterns
    [02468]) echo "even" ;;   # Only if also matches
  esac
  ```

  ## Implementation
  - Parser: recognize ;& and ;| tokens
  - AST: add CaseTerminator enum {Break, FallThrough, FallThroughTest}
  - Executor: implement fall-through logic

  ## Files to Modify
  - src/lexer/mod.rs - add SemiAmp, SemiPipe tokens
  - src/parser/ast.rs - CaseItem with terminator field
  - src/parser/mod.rs - parse new terminators
  - src/executor/mod.rs - execute fall-through
acceptance: case supports ;; (break), ;& (fall-through execute), ;| (fall-through test) terminators
labels:
- posix
- posix-2024
- parser
- control-flow
closed_at: 2026-02-02T09:39:24.248431Z
parent: '193'
verify: cargo test case_fallthrough
claimed_at: 2026-02-02T09:39:24.234128Z
is_archived: true
