id: '46'
title: 'STABILITY-012: Shell Options (set command)'
status: open
priority: 3
created_at: 2026-01-30T18:49:24.489850Z
updated_at: 2026-01-30T18:49:24.489850Z
description: |-
  As a shell scripter, I need shell options so that I can control error handling and debugging behavior.

  ## Priority: P2 - MEDIUM
  Improves script reliability.

  ## Acceptance Criteria
  - [ ] `set -e` - Exit on error
  - [ ] `set -u` - Error on undefined variables
  - [ ] `set -x` - Print commands before execution
  - [ ] `set -o pipefail` - Pipeline fails if any command fails
  - [ ] `set +e`, `set +u`, etc. to unset options
  - [ ] `set` with no args shows current options
  - [ ] Options affect current shell and subshells
  - [ ] cargo test passes (all tests including set tests)
  - [ ] cargo build --release succeeds
  - [ ] cargo clippy -- -D warnings passes

  ## Technical Implementation
  ```rust
  pub struct ShellOptions {
      errexit: bool,     // -e
      nounset: bool,     // -u
      xtrace: bool,      // -x
      pipefail: bool,    // -o pipefail
  }

  impl Runtime {
      pub fn set_option(&mut self, option: &str, value: bool) {
          // Update options
      }
  }
  ```

  ## Files to Modify
  - src/runtime/mod.rs - Add ShellOptions struct
  - src/builtins/mod.rs - Add set builtin
  - src/executor/mod.rs - Check options during execution

  ## Testing
  - Test each option individually
  - Test option combinations
  - Test set/unset toggle

  ## Estimated Effort: 2 days
labels:
- p2
- rush
- shell-options
- stability
