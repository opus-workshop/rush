id: '167'
title: Reduce baseline command execution overhead
status: open
priority: 2
created_at: 2026-01-30T18:49:25.364081Z
updated_at: 2026-01-30T18:49:25.364081Z
description: "## Problem\n\nRush has a consistent ~2.5ms overhead compared to bash for basic command execution. This affects all operations uniformly.\n\n## Benchmark Data\n\n| Operation | Rush | Bash | Overhead |\n|-----------|------|------|----------|\n| exit | 4.67ms | 1.97ms | +2.7ms |\n| echo test | 4.65ms | 1.97ms | +2.7ms |\n| pwd | 4.67ms | 1.99ms | +2.7ms |\n| cd && pwd | 4.66ms | 1.99ms | +2.7ms |\n\n## Analysis\n\nThe consistent ~2.7ms overhead suggests startup/initialization cost rather than per-command overhead. Likely causes:\n- Runtime initialization\n- Parser/lexer setup\n- Environment copying\n- Memory allocation patterns\n\n## Target\n\nReduce baseline to <3ms to be competitive with zsh (3.5ms) and closer to bash (2ms).\n\n## Investigation Areas\n\n- `src/runtime/mod.rs` - Runtime initialization\n- `src/main.rs` - Startup sequence  \n- `src/executor/mod.rs` - Command execution path\n- Profile with `cargo flamegraph` to identify hotspots"
labels:
- perf
verify: 'cargo build --release && cargo test && cargo clippy -- -D warnings && ./tests/smoke_test.sh 2>/dev/null || echo "Smoke tests not available"'
