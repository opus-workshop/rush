id: '111'
title: Startup Optimization - Fast Path for -c Flag
status: open
priority: 2
created_at: 2026-01-30T18:49:24.898550Z
updated_at: 2026-01-30T18:49:24.898550Z
description: "## Problem\nSingle-command execution (`rush -c \"cmd\"`) pays full startup cost even though many features aren't needed.\n\n## Current State\nFor `-c \"echo hello\"`:\n- Full signal handler setup\n- Full process group setup\n- Full executor initialization\n- Terminal control initialization\n- All builtins registered\n\n## Proposed Solution\nCreate a minimal fast path for `-c` flag:\n\n```rust\n// In main.rs\nif is_single_command_mode {\n    return execute_fast_path(command);\n}\n\nfn execute_fast_path(cmd: &str) -> Result<()> {\n    // Minimal initialization:\n    // - Skip terminal control\n    // - Skip corrector\n    // - Minimal signal handling\n    // - Direct execution\n    let tokens = Lexer::tokenize(cmd)?;\n    let mut parser = Parser::new(tokens);\n    let statements = parser.parse()?;\n    \n    let mut executor = Executor::new_minimal();\n    executor.execute(statements)\n}\n```\n\n## Acceptance Criteria\n- [ ] Implement Executor::new_minimal() for single commands\n- [ ] Skip unnecessary initialization in fast path\n- [ ] -c commands execute in <5ms\n- [ ] No regression for interactive mode\n- [ ] All -c related tests pass\n\n## Expected Impact\nTarget: <5ms for `-c \"simple command\"` (40% improvement)"
labels:
- fast-path
- performance
- startup
