id: '158'
title: 'FOUNDATION-003: Implement tilde expansion'
status: open
priority: 1
created_at: 2026-01-30T18:49:25.276103Z
updated_at: 2026-01-30T18:49:25.276103Z
description: |-
  ## Problem
  `cd ~` and `echo ~/foo` don't expand tilde to home directory.

  ## Current Behavior
  - `cd ~` tries to find literal directory named `~`
  - `~/path` not recognized as home directory path

  ## Expected Behavior
  - `~` expands to $HOME
  - `~user` expands to user's home directory
  - Works in any word position: `ls ~/Documents`

  ## Implementation
  1. In lexer/parser: recognize `~` at word start as expansion trigger
  2. In executor: expand `~` to env HOME before command execution
  3. Handle `~user` by looking up passwd entry

  ## Test Cases
  ```bash
  test_case "cd with tilde" 'cd ~; pwd' "$HOME"
  test_case "echo tilde" 'echo ~' "$HOME"
  test_case "tilde in path" 'ls ~/. >/dev/null && echo ok' 'ok'
  ```
