id: '77'
title: 'POSIX-016: Implement here-documents'
status: open
priority: 1
created_at: 2026-01-30T18:49:24.670346Z
updated_at: 2026-01-30T18:49:24.670346Z
description: |-
  Implement here-document syntax (<<EOF and <<-EOF).

  ## Context
  Here-documents allow multi-line input to commands. Essential POSIX feature.

  ## Acceptance Criteria
  - Add here-doc parsing to lexer/parser
  - Implement basic here-doc: `cat <<EOF\nline1\nline2\nEOF`
  - Implement indented here-doc: `cat <<-EOF\n\tindented\nEOF` (strips leading tabs)
  - Test variable expansion in here-docs
  - Test quoted delimiter (no expansion): `cat <<'EOF'\n$var\nEOF`
  - Test here-doc with commands: `grep foo <<EOF`
  - Test multiple here-docs in same command
  - Test here-doc in pipelines: `cat <<EOF | grep pattern`
  - Add integration tests
  - Document syntax

  ## POSIX Requirements
  - `<<word`: Lines until 'word' are stdin to command
  - `<<-word`: Same but strips leading tabs from lines
  - Variable expansion happens unless delimiter is quoted
  - Delimiter must be on line by itself
  - Multiple here-docs can be in same command

  ## Files to Create/Modify
  - src/lexer.rs (add here-doc token recognition)
  - src/parser.rs (parse here-doc syntax)
  - src/ast.rs (add HereDoc node to AST)
  - src/executor/mod.rs (handle here-doc execution)
  - tests/here_doc_tests.rs (add tests)

  ## Estimated Effort
  55-60k tokens (complex parsing, variable expansion, add tests)
labels:
- critical
- io
- parser
- posix
- redirection
