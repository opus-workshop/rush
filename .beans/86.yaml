id: '86'
title: 'POSIX-024: Implement terminal signals'
status: open
priority: 2
created_at: 2026-01-30T18:49:24.727168Z
updated_at: 2026-01-30T18:49:24.727168Z
description: |-
  Implement handling for terminal stop signals (SIGTSTP, SIGTTIN, SIGTTOU).

  ## Context
  Background jobs that try to read/write terminal should stop. Need proper handling of terminal signals.

  ## Acceptance Criteria
  - Implement SIGTSTP handler (Ctrl+Z stops foreground job)
  - Implement SIGTTIN handling (background read from terminal)
  - Implement SIGTTOU handling (background write to terminal)
  - Test Ctrl+Z stops foreground job and returns to shell
  - Test fg resumes stopped job
  - Test bg resumes stopped job in background
  - Test background job stops on terminal access
  - Job status shows "Stopped" for stopped jobs
  - Add integration tests
  - Document signal handling

  ## POSIX Requirements
  - SIGTSTP: stops foreground job (Ctrl+Z)
  - SIGTTIN: sent to background job reading from terminal
  - SIGTTOU: sent to background job writing to terminal (if tostop set)
  - Stopped jobs can be resumed with fg/bg
  - Job status reflects stopped state

  ## Files to Modify
  - src/signal.rs (add SIGTSTP, SIGTTIN, SIGTTOU handlers)
  - src/jobs/mod.rs (mark jobs as stopped, resume them)
  - src/builtins/jobs.rs (show "Stopped" status)
  - tests/terminal_signal_tests.rs (add tests)

  ## Estimated Effort
  45-55k tokens (implement signal handlers, job state management, add tests)
labels:
- important
- posix
- signals
- terminal
verify: 'cargo build --release && cargo test && echo "echo test" | ./target/release/rush'
