id: '96'
title: 'POSIX-007: Re-enable and test exec builtin'
status: open
priority: 1
created_at: 2026-01-30T18:49:24.792671Z
updated_at: 2026-01-30T18:49:24.792671Z
description: |-
  Re-enable the `exec` builtin for replacing the shell process with another command.

  ## Context
  The `exec` builtin exists at `src/builtins/exec.rs` but is commented out. Used for shell replacement and permanent redirections.

  ## Acceptance Criteria
  - Uncomment `exec` module in src/builtins/mod.rs
  - Uncomment exec builtin registration
  - Test basic exec: `exec echo hello` (replaces shell, prints hello, shell exits)
  - Test exec with redirections: `exec 3> file.txt` (permanent FD redirection)
  - Test exec closing FDs: `exec 3>&-` (close FD 3)
  - Test exec failure (command not found) doesn't exit shell
  - Test exec with environment: `exec env FOO=bar printenv FOO`
  - Verify process replacement works correctly
  - Add integration tests
  - Update help text

  ## POSIX Requirements
  - Replace current shell with specified command
  - If command succeeds, shell doesn't continue
  - If command fails to execute, shell may exit (varies by shell)
  - With redirections but no command, perform permanent redirections
  - Exit code: command's exit code, or error code if exec fails

  ## Files to Modify
  - src/builtins/mod.rs (uncomment)
  - src/builtins/exec.rs (verify implementation)
  - src/executor/mod.rs (verify exec integration)
  - tests/exec_tests.rs or similar (add tests)

  ## Estimated Effort
  40-50k tokens (re-enable, test process replacement, add tests)
verify: cargo build --release && cargo test && cargo clippy -- -D warnings
labels:
- builtin
- critical
- execution
- posix
- processes
