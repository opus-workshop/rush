id: '145'
title: 'FOUNDATION-010: Job control and background jobs'
status: open
priority: 2
created_at: 2026-01-30T18:49:25.163041Z
updated_at: 2026-01-30T18:49:25.163041Z
description: |-
  ## Problem
  Background jobs and job control may not work reliably.

  ## Current Behavior
  Need to verify:
  - `sleep 1 &` - background job
  - `jobs` - list jobs
  - `fg %1` - bring to foreground
  - `bg %1` - continue in background
  - `wait` - wait for background jobs

  ## Expected Behavior
  ```bash
  sleep 10 &           # Start in background, prints [1] PID
  jobs                 # Shows: [1]+ Running sleep 10 &
  fg %1                # Brings job 1 to foreground
  # Ctrl+Z             # Suspends job
  bg %1                # Continues suspended job in background
  wait                 # Waits for all background jobs
  wait %1              # Waits for specific job
  ```

  ## Implementation
  1. Track background jobs with job IDs
  2. Implement job table with status tracking
  3. Handle SIGCHLD to update job status
  4. Job specs: %1, %+, %-, %string
  5. Handle terminal control (SIGTSTP, SIGCONT)

  ## Test Cases
  ```bash
  test_succeeds "background job" 'sleep 0.1 &'
  test_succeeds "jobs builtin" 'sleep 0.1 & jobs'
  test_succeeds "wait builtin" 'sleep 0.1 & wait'
  ```
verify: 'cargo build --release && cargo test && echo "echo test" | ./target/release/rush'
