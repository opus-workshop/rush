{"id":"rush-2pv","title":"Rush 1.0 Critical Features","description":"Complete the essential missing features to make Rush production-ready for 1.0 release.\n\n## Success Criteria\n- All 8 stories completed with tests\n- 1.0 release candidate builds successfully\n- All existing 109 tests still pass\n- Can replace bash/zsh for daily development work\n- Installation takes \u003c 5 minutes on any platform\n- Documentation updated for all new features","status":"open","priority":2,"issue_type":"epic","owner":"a@kf.cafe","created_at":"2026-01-20T09:10:32.205825-08:00","created_by":"Asher","updated_at":"2026-01-20T09:10:32.205825-08:00","labels":["1.0","epic","rush"]}
{"id":"rush-2pv.1","title":"US-003: Robust Pipeline Implementation","description":"As a power user, I want complex multi-stage pipelines to work reliably so that I can compose commands like any Unix shell.\n\n## Acceptance Criteria\n- [ ] Multi-stage pipes work: `cat file | grep pattern | sort | uniq -c`\n- [ ] Proper error propagation through pipeline\n- [ ] Pipeline exit code is last command's exit code\n- [ ] SIGPIPE handling (broken pipe errors)\n- [ ] Handles large data streams without blocking\n- [ ] Works with builtins and external commands\n- [ ] cargo test passes (all tests including new pipeline tests)\n- [ ] cargo build --release succeeds\n- [ ] cargo clippy -- -D warnings passes\n- [ ] Manual testing: complex pipelines with 5+ stages\n\n## Technical Notes\n- Review and harden src/executor/pipeline.rs\n- Add comprehensive pipeline tests\n- Handle backpressure and buffering\n- Test with large files and many pipeline stages","status":"open","priority":1,"issue_type":"task","owner":"a@kf.cafe","created_at":"2026-01-20T09:10:32.32608-08:00","created_by":"Asher","updated_at":"2026-01-20T09:10:32.32608-08:00","labels":["1.0","backend","critical","rush"],"dependencies":[{"issue_id":"rush-2pv.1","depends_on_id":"rush-2pv","type":"parent-child","created_at":"2026-01-20T09:10:32.327547-08:00","created_by":"Asher"}]}
{"id":"rush-2pv.2","title":"US-002: File Redirections","description":"As a shell user, I want standard Unix redirections (\u003e, \u003e\u003e, 2\u003e, \u0026\u003e) so that I can redirect output to files like any Unix shell.\n\n## Acceptance Criteria\n- [ ] stdout redirection: `echo \"test\" \u003e file.txt`\n- [ ] Append mode: `echo \"more\" \u003e\u003e file.txt`\n- [ ] stderr redirection: `command 2\u003e errors.log`\n- [ ] Combined redirection: `command \u0026\u003e output.log`\n- [ ] Input redirection: `command \u003c input.txt`\n- [ ] Works with pipes: `cmd | grep foo \u003e results.txt`\n- [ ] cargo test passes (all tests including new redirection tests)\n- [ ] cargo build --release succeeds\n- [ ] cargo clippy -- -D warnings passes\n- [ ] Manual testing: verify files created with correct content\n\n## Technical Notes\n- Extend src/executor/pipeline.rs\n- Parse redirection operators in lexer/parser\n- Handle file creation/appending\n- Properly separate stdout/stderr streams","status":"open","priority":2,"issue_type":"task","owner":"a@kf.cafe","created_at":"2026-01-20T09:10:32.445054-08:00","created_by":"Asher","updated_at":"2026-01-20T09:10:32.445054-08:00","labels":["1.0","backend","critical","rush"],"dependencies":[{"issue_id":"rush-2pv.2","depends_on_id":"rush-2pv","type":"parent-child","created_at":"2026-01-20T09:10:32.446095-08:00","created_by":"Asher"},{"issue_id":"rush-2pv.2","depends_on_id":"rush-2pv.1","type":"blocks","created_at":"2026-01-20T09:10:32.54342-08:00","created_by":"Asher"}]}
{"id":"rush-2pv.3","title":"US-001: Script Execution","description":"As a developer, I want to execute Rush shell scripts from files so that I can automate tasks and run saved scripts.\n\n## Acceptance Criteria\n- [ ] Can execute .rush files: `rush script.rush`\n- [ ] Shebang support: `#!/usr/bin/env rush`\n- [ ] Script arguments accessible via $1, $2, etc.\n- [ ] Exit codes propagate correctly\n- [ ] Error messages show script name and line number\n- [ ] Scripts can source other scripts\n- [ ] cargo test passes (all tests including new script execution tests)\n- [ ] cargo build --release succeeds\n- [ ] cargo clippy -- -D warnings passes\n- [ ] Manual testing: run sample scripts with various features\n\n## Technical Notes\n- Modify src/executor/mod.rs to accept file input\n- Add script argument parsing\n- Implement file reading and execution loop\n- Add line number tracking for errors","status":"open","priority":1,"issue_type":"task","owner":"a@kf.cafe","created_at":"2026-01-20T09:10:32.65802-08:00","created_by":"Asher","updated_at":"2026-01-20T09:10:32.65802-08:00","labels":["1.0","backend","critical","rush"],"dependencies":[{"issue_id":"rush-2pv.3","depends_on_id":"rush-2pv","type":"parent-child","created_at":"2026-01-20T09:10:32.659146-08:00","created_by":"Asher"}]}
{"id":"rush-2pv.4","title":"US-004: Configuration File Support","description":"As a Rush user, I want a startup config file (~/.rushrc) so that I can customize my environment, aliases, and preferences.\n\n## Acceptance Criteria\n- [ ] Loads ~/.rushrc on startup (if exists)\n- [ ] Supports setting environment variables\n- [ ] Supports defining aliases\n- [ ] Supports defining functions\n- [ ] Supports setting shell options\n- [ ] Errors in config show helpful messages\n- [ ] Can skip config with --no-config flag\n- [ ] cargo test passes (all tests including config tests)\n- [ ] cargo build --release succeeds\n- [ ] cargo clippy -- -D warnings passes\n- [ ] Manual testing: create ~/.rushrc and verify it loads\n\n## Technical Notes\n- Create config module\n- Parse Rush script syntax from file\n- Execute config before REPL starts\n- Add error handling for bad config\n- Document config file format","status":"open","priority":2,"issue_type":"task","owner":"a@kf.cafe","created_at":"2026-01-20T09:10:32.775504-08:00","created_by":"Asher","updated_at":"2026-01-20T09:10:32.775504-08:00","labels":["1.0","feature","rush"],"dependencies":[{"issue_id":"rush-2pv.4","depends_on_id":"rush-2pv","type":"parent-child","created_at":"2026-01-20T09:10:32.776528-08:00","created_by":"Asher"},{"issue_id":"rush-2pv.4","depends_on_id":"rush-2pv.3","type":"blocks","created_at":"2026-01-20T09:10:32.872525-08:00","created_by":"Asher"}]}
{"id":"rush-2pv.5","title":"US-005: Confirmation Prompts for Destructive Operations","description":"As a cautious user, I want confirmation prompts before destructive operations so that I don't accidentally delete important files.\n\n## Acceptance Criteria\n- [ ] rm -rf prompts for confirmation\n- [ ] Shows what will be deleted (file count, size)\n- [ ] y/N prompt with default to No\n- [ ] Can force with --yes flag to skip prompt\n- [ ] Works in scripts (auto-yes or auto-no based on flag)\n- [ ] Integrates with undo system\n- [ ] cargo test passes (all tests including prompt tests)\n- [ ] cargo build --release succeeds\n- [ ] cargo clippy -- -D warnings passes\n- [ ] Manual testing: verify prompts appear and work correctly\n\n## Technical Notes\n- Add prompt logic to rm builtin\n- Calculate total size before deletion\n- Add --yes and --force flags\n- Make it work non-interactively for scripts","status":"open","priority":2,"issue_type":"task","owner":"a@kf.cafe","created_at":"2026-01-20T09:10:32.991811-08:00","created_by":"Asher","updated_at":"2026-01-20T09:10:32.991811-08:00","labels":["1.0","feature","rush","safety"],"dependencies":[{"issue_id":"rush-2pv.5","depends_on_id":"rush-2pv","type":"parent-child","created_at":"2026-01-20T09:10:32.992881-08:00","created_by":"Asher"}]}
{"id":"rush-2pv.6","title":"US-006: Better Error Messages with Suggestions","description":"As a user who makes typos, I want helpful error messages with suggestions so that I can quickly fix my mistakes.\n\n## Acceptance Criteria\n- [ ] \"command not found\" suggests similar commands\n- [ ] Uses fuzzy matching (edit distance)\n- [ ] Suggests from builtins, aliases, and PATH\n- [ ] Shows \"Did you mean: X?\" for close matches\n- [ ] Suggests common flag typos\n- [ ] Works for Git commands and other builtins\n- [ ] cargo test passes (all tests including suggestion tests)\n- [ ] cargo build --release succeeds\n- [ ] cargo clippy -- -D warnings passes\n- [ ] Manual testing: verify suggestions for common typos\n\n## Technical Notes\n- Implement fuzzy string matching (use strsim or similar)\n- Build suggestion system\n- Integrate into error handling\n- Add tests for common typos","status":"open","priority":3,"issue_type":"task","owner":"a@kf.cafe","created_at":"2026-01-20T09:10:33.109985-08:00","created_by":"Asher","updated_at":"2026-01-20T09:10:33.109985-08:00","labels":["1.0","feature","rush","ux"],"dependencies":[{"issue_id":"rush-2pv.6","depends_on_id":"rush-2pv","type":"parent-child","created_at":"2026-01-20T09:10:33.110935-08:00","created_by":"Asher"}]}
{"id":"rush-2pv.7","title":"US-008: Command Suggestions (Did You Mean?)","description":"As a user learning Rush, I want command suggestions when I mistype so that I can discover the correct command.\n\n## Acceptance Criteria\n- [ ] Typo detection for commands: \"carg\" → \"cargo\"\n- [ ] Suggests from command history\n- [ ] Suggests based on current context (git repo → git commands)\n- [ ] Configurable threshold for suggestions\n- [ ] Shows multiple suggestions if close match\n- [ ] Works for both builtins and external commands\n- [ ] cargo test passes (all tests including suggestion tests)\n- [ ] cargo build --release succeeds\n- [ ] cargo clippy -- -D warnings passes\n- [ ] Manual testing: verify context-aware suggestions\n\n## Technical Notes\n- Reuse fuzzy matcher from Story 6 or history module\n- Build command suggestion index\n- Integrate with error handling\n- Add configuration option to disable","status":"open","priority":3,"issue_type":"task","owner":"a@kf.cafe","created_at":"2026-01-20T09:10:33.221208-08:00","created_by":"Asher","updated_at":"2026-01-20T09:10:33.221208-08:00","labels":["1.0","feature","rush","ux"],"dependencies":[{"issue_id":"rush-2pv.7","depends_on_id":"rush-2pv","type":"parent-child","created_at":"2026-01-20T09:10:33.222458-08:00","created_by":"Asher"}]}
{"id":"rush-2pv.8","title":"US-007: CI/CD and Distribution","description":"As a potential Rush user, I want easy installation via package managers so that I don't have to build from source.\n\n## Acceptance Criteria\n- [ ] GitHub Actions workflow for releases\n- [ ] Pre-built binaries for macOS (Intel + ARM)\n- [ ] Pre-built binaries for Linux (x86_64)\n- [ ] Homebrew formula\n- [ ] Installation instructions in README\n- [ ] Version tags trigger automated builds\n- [ ] Checksums for all binaries\n- [ ] GitHub Actions workflow runs successfully\n- [ ] Test installation on clean macOS machine\n- [ ] Test installation on clean Linux machine\n\n## Technical Notes\n- Create .github/workflows/release.yml\n- Set up cross-compilation\n- Create Homebrew tap\n- Document installation process\n- Test on clean machines","status":"open","priority":4,"issue_type":"task","owner":"a@kf.cafe","created_at":"2026-01-20T09:10:33.341861-08:00","created_by":"Asher","updated_at":"2026-01-20T09:10:33.341861-08:00","labels":["1.0","distribution","infrastructure","rush"],"dependencies":[{"issue_id":"rush-2pv.8","depends_on_id":"rush-2pv","type":"parent-child","created_at":"2026-01-20T09:10:33.343023-08:00","created_by":"Asher"}]}
{"id":"rush-4et","title":"Add custom themes and prompt configuration","description":"Implement customizable shell appearance: 1) Custom prompt templates, 2) Color themes, 3) Git status in prompt, 4) Dynamic prompt elements, 5) Multi-line prompt support, 6) Vi/Emacs mode indicators","status":"open","priority":3,"issue_type":"feature","owner":"a@kf.cafe","created_at":"2026-01-20T03:03:36.298633-08:00","created_by":"Asher","updated_at":"2026-01-20T03:03:36.298633-08:00","labels":["enhancement","phase5","ux"]}
{"id":"rush-5z6","title":"Improve pipeline support for complex multi-stage pipelines","description":"Current pipeline implementation is basic. Need to support: 1) Multi-stage pipelines (cmd1 | cmd2 | cmd3), 2) Pipeline error handling, 3) PIPESTATUS equivalent, 4) Process substitution, 5) Proper file descriptor handling","status":"open","priority":2,"issue_type":"feature","owner":"a@kf.cafe","created_at":"2026-01-20T03:03:03.335862-08:00","created_by":"Asher","updated_at":"2026-01-20T03:03:03.335862-08:00","labels":["enhancement","phase4"]}
{"id":"rush-7sz","title":"Implement plugin system for extensibility","description":"Design and implement a plugin system that allows: 1) Loading external Rust plugins, 2) Custom builtin commands, 3) Hook system for events, 4) Safe plugin sandboxing, 5) Plugin dependency management, 6) Plugin configuration","status":"open","priority":3,"issue_type":"feature","owner":"a@kf.cafe","created_at":"2026-01-20T03:03:22.475413-08:00","created_by":"Asher","updated_at":"2026-01-20T03:03:22.475413-08:00","labels":["architecture","enhancement","phase5"]}
{"id":"rush-bvw","title":"Rush Shell Stability - Login Shell Ready","description":"Make Rush stable enough to be used as a default login shell on macOS/Linux.\n\n## Success Criteria\n- ✅ All tests pass (including new stability tests)\n- ✅ Can source standard shell configs (~/.profile, ~/.rushrc equivalents)\n- ✅ Can run common system scripts without errors\n- ✅ Handles signals gracefully (no orphaned processes)\n- ✅ Works in both TTY and non-TTY modes\n- ✅ Exit codes propagate correctly\n- ✅ No crashes during normal operation\n- ✅ Can survive and recover from parse errors\n- ✅ Job control works (background jobs don't block)\n- ✅ Used successfully as login shell for 1 week without issues\n\n## Timeline\n3-4 weeks to production-ready:\n- Week 1: Critical blockers (non-TTY, signals, redirection, subshells, exit codes)\n- Week 2: Core features (variable expansion, wildcards, command substitution)\n- Week 3: Job control and polish\n- Week 4: Stability testing and integration tests\n\n## Reference\nSee docs/stability-roadmap.md for complete details.","status":"open","priority":2,"issue_type":"epic","owner":"a@kf.cafe","created_at":"2026-01-20T05:01:33.112277-08:00","created_by":"Asher","updated_at":"2026-01-20T05:01:33.112277-08:00","labels":["epic","login-shell","rush","stability"]}
{"id":"rush-bvw.1","title":"STABILITY-001: Non-TTY Mode Support","description":"As a user running rush in non-interactive contexts, I need rush to work without a TTY so that login scripts, pipes, and command substitution work correctly.\n\n## Priority: P0 - BLOCKING\nThis is the single most critical blocker for login shell use.\n\n## Problem\n- Reedline requires TTY and crashes on non-interactive use\n- Breaks: login scripts, `echo \"pwd\" | rush`, `$(rush -c \"cmd\")`\n- Makes rush unusable for automation or as a login shell\n\n## Acceptance Criteria\n- [ ] Detects TTY vs non-TTY mode using atty crate\n- [ ] Interactive mode: Uses reedline for rich line editing\n- [ ] Non-interactive mode: Uses simple stdin reader\n- [ ] `echo \"pwd\" | rush` works\n- [ ] `rush -c \"echo test\"` works (already works)\n- [ ] `rush \u003c script.sh` works\n- [ ] `$(rush -c \"echo nested\")` works (command substitution)\n- [ ] Can be used in cron jobs\n- [ ] cargo test passes (all tests including non-TTY tests)\n- [ ] cargo build --release succeeds\n- [ ] cargo clippy -- -D warnings passes\n\n## Technical Implementation\n```rust\n// In main.rs\nuse atty;\n\nfn run_interactive() -\u003e Result\u003c()\u003e {\n    if atty::is(atty::Stream::Stdin) {\n        run_interactive_with_reedline()\n    } else {\n        run_non_interactive()\n    }\n}\n\nfn run_non_interactive() -\u003e Result\u003c()\u003e {\n    let stdin = std::io::stdin();\n    for line in stdin.lock().lines() {\n        let line = line?;\n        execute_line(\u0026line, \u0026mut executor)?;\n    }\n    Ok(())\n}\n```\n\n## Files to Modify\n- src/main.rs:188 - Split run_interactive() into TTY/non-TTY paths\n- Cargo.toml - Add atty dependency\n\n## Testing\n- Unit tests for non-TTY execution\n- Integration test: echo commands through pipe\n- Integration test: command substitution\n- Integration test: script redirection\n\n## Estimated Effort: 1-2 days","status":"closed","priority":1,"issue_type":"task","owner":"a@kf.cafe","created_at":"2026-01-20T05:01:33.322816-08:00","created_by":"Asher","updated_at":"2026-01-20T05:10:30.397009-08:00","closed_at":"2026-01-20T05:10:30.397011-08:00","labels":["critical","non-tty","p0","rush","stability"],"dependencies":[{"issue_id":"rush-bvw.1","depends_on_id":"rush-bvw","type":"parent-child","created_at":"2026-01-20T05:01:33.323876-08:00","created_by":"Asher"}]}
{"id":"rush-bvw.10","title":"STABILITY-010: Error Recovery","description":"As a user, I need rush to recover from errors gracefully so that it doesn't crash and I don't lose my session.\n\n## Priority: P1 - HIGH\nCritical for login shell stability.\n\n## Acceptance Criteria\n- [ ] Parse errors don't crash shell\n- [ ] Execution errors don't crash shell\n- [ ] Returns to prompt after error\n- [ ] Logs errors without exiting\n- [ ] Panic recovery handler (last resort)\n- [ ] State corruption recovery\n- [ ] History saved on crash\n- [ ] cargo test passes (all tests including recovery tests)\n- [ ] cargo build --release succeeds\n- [ ] cargo clippy -- -D warnings passes\n\n## Technical Implementation\n```rust\nfn run_interactive() -\u003e Result\u003c()\u003e {\n    loop {\n        match std::panic::catch_unwind(|| {\n            // Execute line with panic protection\n        }) {\n            Ok(Ok(result)) =\u003e handle_success(result),\n            Ok(Err(e)) =\u003e handle_error(e),\n            Err(panic) =\u003e handle_panic(panic),\n        }\n    }\n}\n```\n\n## Files to Modify\n- src/main.rs - Add panic recovery\n- src/executor/mod.rs - Better error handling\n- src/parser/mod.rs - Graceful parse error handling\n\n## Testing\n- Test parse errors don't crash\n- Test execution errors don't crash\n- Test panic recovery (if possible)\n\n## Estimated Effort: 1 day","status":"closed","priority":2,"issue_type":"task","owner":"a@kf.cafe","created_at":"2026-01-20T05:01:35.237979-08:00","created_by":"Asher","updated_at":"2026-01-20T09:18:06.400356-08:00","closed_at":"2026-01-20T09:18:06.40036-08:00","labels":["error-handling","p1","rush","stability"],"dependencies":[{"issue_id":"rush-bvw.10","depends_on_id":"rush-bvw","type":"parent-child","created_at":"2026-01-20T05:01:35.239392-08:00","created_by":"Asher"}]}
{"id":"rush-bvw.11","title":"STABILITY-011: Login Shell Initialization","description":"As a rush user, I need proper login shell initialization so that my environment is set up correctly on login.\n\n## Priority: P2 - MEDIUM\nImportant for login shell use.\n\n## Acceptance Criteria\n- [ ] Sources ~/.rush_profile on login shell\n- [ ] Sources ~/.rushrc on interactive shell\n- [ ] Sets $SHELL environment variable\n- [ ] Sets $TERM if not set\n- [ ] Sets $USER, $HOME correctly\n- [ ] --login flag forces login shell behavior\n- [ ] --no-rc skips config files\n- [ ] cargo test passes (all tests including init tests)\n- [ ] cargo build --release succeeds\n- [ ] cargo clippy -- -D warnings passes\n\n## Technical Implementation\n```rust\nfn run_login_shell() -\u003e Result\u003c()\u003e {\n    // Set environment variables\n    env::set_var(\"SHELL\", env::current_exe()?);\n\n    // Source profile\n    if let Some(profile) = find_profile() {\n        source_file(\u0026profile)?;\n    }\n\n    // Run interactive\n    run_interactive()\n}\n```\n\n## Files to Modify\n- src/main.rs - Add login shell detection and init\n- src/executor/mod.rs - Add source_file function\n\n## Testing\n- Test profile sourcing\n- Test environment variable setup\n- Test --login and --no-rc flags\n\n## Estimated Effort: 1 day","status":"closed","priority":3,"issue_type":"task","owner":"a@kf.cafe","created_at":"2026-01-20T05:01:35.451248-08:00","created_by":"Asher","updated_at":"2026-01-20T09:44:54.961813-08:00","closed_at":"2026-01-20T09:44:54.961828-08:00","labels":["initialization","p2","rush","stability"],"dependencies":[{"issue_id":"rush-bvw.11","depends_on_id":"rush-bvw","type":"parent-child","created_at":"2026-01-20T05:01:35.455394-08:00","created_by":"Asher"}]}
{"id":"rush-bvw.12","title":"STABILITY-012: Shell Options (set command)","description":"As a shell scripter, I need shell options so that I can control error handling and debugging behavior.\n\n## Priority: P2 - MEDIUM\nImproves script reliability.\n\n## Acceptance Criteria\n- [ ] `set -e` - Exit on error\n- [ ] `set -u` - Error on undefined variables\n- [ ] `set -x` - Print commands before execution\n- [ ] `set -o pipefail` - Pipeline fails if any command fails\n- [ ] `set +e`, `set +u`, etc. to unset options\n- [ ] `set` with no args shows current options\n- [ ] Options affect current shell and subshells\n- [ ] cargo test passes (all tests including set tests)\n- [ ] cargo build --release succeeds\n- [ ] cargo clippy -- -D warnings passes\n\n## Technical Implementation\n```rust\npub struct ShellOptions {\n    errexit: bool,     // -e\n    nounset: bool,     // -u\n    xtrace: bool,      // -x\n    pipefail: bool,    // -o pipefail\n}\n\nimpl Runtime {\n    pub fn set_option(\u0026mut self, option: \u0026str, value: bool) {\n        // Update options\n    }\n}\n```\n\n## Files to Modify\n- src/runtime/mod.rs - Add ShellOptions struct\n- src/builtins/mod.rs - Add set builtin\n- src/executor/mod.rs - Check options during execution\n\n## Testing\n- Test each option individually\n- Test option combinations\n- Test set/unset toggle\n\n## Estimated Effort: 2 days","status":"closed","priority":3,"issue_type":"task","owner":"a@kf.cafe","created_at":"2026-01-20T05:01:35.674092-08:00","created_by":"Asher","updated_at":"2026-01-20T09:21:21.752553-08:00","closed_at":"2026-01-20T09:21:21.75256-08:00","labels":["p2","rush","shell-options","stability"],"dependencies":[{"issue_id":"rush-bvw.12","depends_on_id":"rush-bvw","type":"parent-child","created_at":"2026-01-20T05:01:35.675123-08:00","created_by":"Asher"}]}
{"id":"rush-bvw.13","title":"STABILITY-013: Integration Tests for Login Shell","description":"As a rush developer, I need comprehensive integration tests so that I can verify rush works correctly as a login shell.\n\n## Priority: P1 - HIGH\nEssential for verification.\n\n## Acceptance Criteria\n- [ ] Non-interactive mode tests (echo | rush)\n- [ ] Script execution tests\n- [ ] Command substitution tests\n- [ ] Signal handling tests\n- [ ] Redirection tests\n- [ ] Pipeline tests\n- [ ] Exit code tests\n- [ ] Job control tests (if implemented)\n- [ ] All integration tests pass\n- [ ] Tests run in CI\n\n## Test Suite\n```bash\n# tests/integration/login_shell_test.sh\n#!/bin/bash\n\n# Test 1: Non-interactive mode\necho \"pwd\" | ./target/release/rush\n\n# Test 2: Script execution\n./target/release/rush tests/fixtures/test_script.sh\n\n# Test 3: Command substitution\n./target/release/rush -c \"echo $(./target/release/rush -c 'echo nested')\"\n\n# Test 4: Signal handling\n./target/release/rush -c \"sleep 100\" \u0026\nkill $!\n\n# Test 5: Exit codes\n./target/release/rush -c \"false\" ; echo $?  # Should be 1\n\n# Test 6: Redirection\n./target/release/rush -c \"echo test \u003e /tmp/rush_test.txt\"\ncat /tmp/rush_test.txt\n```\n\n## Files to Create\n- tests/integration/login_shell_test.sh\n- tests/integration/non_tty_test.sh\n- tests/integration/signal_test.sh\n- tests/fixtures/*.sh (test scripts)\n\n## Testing\n- Run full integration test suite\n- Verify all tests pass\n- Add to CI pipeline\n\n## Estimated Effort: 2 days","status":"closed","priority":2,"issue_type":"task","owner":"a@kf.cafe","created_at":"2026-01-20T05:01:35.871429-08:00","created_by":"Asher","updated_at":"2026-01-20T09:45:59.096809-08:00","closed_at":"2026-01-20T09:45:59.096813-08:00","labels":["integration","p1","rush","stability","testing"],"dependencies":[{"issue_id":"rush-bvw.13","depends_on_id":"rush-bvw","type":"parent-child","created_at":"2026-01-20T05:01:35.872491-08:00","created_by":"Asher"}]}
{"id":"rush-bvw.14","title":"STABILITY-014: Real-World Stability Testing (1 Week Trial)","description":"As the rush developer, I need to use rush as my login shell for 1 week so that I can identify and fix real-world issues.\n\n## Priority: P1 - HIGH\nFinal verification step.\n\n## Acceptance Criteria\n- [ ] Set rush as login shell on development machine\n- [ ] Use for all daily work for 1 week\n- [ ] Document all issues encountered\n- [ ] Fix critical issues immediately\n- [ ] Create beads for nice-to-have improvements\n- [ ] No crashes during 1 week trial\n- [ ] No data loss during 1 week trial\n- [ ] Performance acceptable for daily use\n\n## Testing Checklist\n- [ ] Day 1: Basic usage (cd, ls, cat, git)\n- [ ] Day 2: Complex pipelines and scripts\n- [ ] Day 3: Background jobs and job control\n- [ ] Day 4: Heavy I/O operations\n- [ ] Day 5: Integration with other tools (git, cargo, npm)\n- [ ] Day 6: Stress testing (many commands, long sessions)\n- [ ] Day 7: Final verification and documentation\n\n## Rollback Plan\nKeep backup shell configured:\n```bash\necho $SHELL \u003e ~/.backup_shell\n# Emergency: chsh -s /bin/zsh\n```\n\n## Issues to Watch For\n- Crashes or panics\n- Orphaned processes\n- Memory leaks\n- Slow performance\n- Terminal corruption\n- Signal handling issues\n- History corruption\n\n## Estimated Effort: 5 days (1 week of use + fixes)","status":"open","priority":2,"issue_type":"task","owner":"a@kf.cafe","created_at":"2026-01-20T05:01:36.076264-08:00","created_by":"Asher","updated_at":"2026-01-20T05:01:36.076264-08:00","labels":["p1","real-world","rush","stability","testing"],"dependencies":[{"issue_id":"rush-bvw.14","depends_on_id":"rush-bvw","type":"parent-child","created_at":"2026-01-20T05:01:36.077179-08:00","created_by":"Asher"}]}
{"id":"rush-bvw.2","title":"STABILITY-002: Signal Handling","description":"As a user, I need rush to handle signals properly so that there are no orphaned processes or corrupted state when I press Ctrl-C.\n\n## Priority: P0 - BLOCKING\nCritical for preventing orphaned processes and data corruption.\n\n## Problem\n- No SIGINT, SIGTERM, SIGHUP handlers\n- Ctrl-C leaves orphaned child processes\n- State corruption possible on unexpected termination\n\n## Acceptance Criteria\n- [ ] SIGINT (Ctrl-C) handler implemented\n- [ ] SIGTERM handler implemented\n- [ ] SIGHUP handler implemented\n- [ ] Child processes cleaned up on signal\n- [ ] Exit with correct signal exit code (130 for SIGINT)\n- [ ] State is saved/cleaned before exit\n- [ ] No orphaned processes after signal\n- [ ] cargo test passes (all tests including signal tests)\n- [ ] cargo build --release succeeds\n- [ ] cargo clippy -- -D warnings passes\n\n## Technical Implementation\n```rust\nuse signal_hook::{consts::{SIGINT, SIGTERM, SIGHUP}, iterator::Signals};\n\nfn setup_signal_handlers() -\u003e Result\u003c()\u003e {\n    let mut signals = Signals::new(\u0026[SIGINT, SIGTERM, SIGHUP])?;\n\n    thread::spawn(move || {\n        for sig in signals.forever() {\n            match sig {\n                SIGINT =\u003e handle_sigint(),\n                SIGTERM =\u003e handle_sigterm(),\n                SIGHUP =\u003e handle_sighup(),\n                _ =\u003e {}\n            }\n        }\n    });\n\n    Ok(())\n}\n```\n\n## Files to Modify\n- src/main.rs - Register signal handlers on startup\n- src/executor/mod.rs - Add signal handling to executor\n- Cargo.toml - Add signal_hook dependency\n\n## Testing\n- Test Ctrl-C during long-running command\n- Test killing rush process during pipeline\n- Test no orphaned processes after signal\n- Test state cleanup on signal\n\n## Estimated Effort: 1 day","status":"closed","priority":1,"issue_type":"task","owner":"a@kf.cafe","created_at":"2026-01-20T05:01:33.520776-08:00","created_by":"Asher","updated_at":"2026-01-20T05:20:16.115944-08:00","closed_at":"2026-01-20T05:20:16.115946-08:00","labels":["critical","p0","rush","signals","stability"],"dependencies":[{"issue_id":"rush-bvw.2","depends_on_id":"rush-bvw","type":"parent-child","created_at":"2026-01-20T05:01:33.52309-08:00","created_by":"Asher"}]}
{"id":"rush-bvw.3","title":"STABILITY-003: File Redirection Support","description":"As a shell user, I need standard Unix redirections so that I can redirect output to files and chain commands properly.\n\n## Priority: P0 - BLOCKING\nEssential for basic shell scripting.\n\n## Problem\n- No `\u003e`, `\u003e\u003e`, `\u003c`, `2\u003e`, `2\u003e\u00261`, `\u0026\u003e` support\n- Cannot save command output to files\n- Cannot redirect error streams\n\n## Acceptance Criteria\n- [ ] `\u003e` stdout redirect: `echo \"test\" \u003e file.txt`\n- [ ] `\u003e\u003e` append redirect: `echo \"more\" \u003e\u003e file.txt`\n- [ ] `\u003c` stdin redirect: `command \u003c input.txt`\n- [ ] `2\u003e` stderr redirect: `command 2\u003e errors.log`\n- [ ] `2\u003e\u00261` stderr to stdout: `command 2\u003e\u00261 | grep error`\n- [ ] `\u0026\u003e` both to file: `command \u0026\u003e output.log`\n- [ ] Works with pipes: `cmd | grep foo \u003e results.txt`\n- [ ] File permissions handled correctly\n- [ ] Handles missing parent directories gracefully\n- [ ] cargo test passes (all tests including redirection tests)\n- [ ] cargo build --release succeeds\n- [ ] cargo clippy -- -D warnings passes\n\n## Technical Implementation\n```rust\n// In parser/ast.rs\npub enum Redirect {\n    Stdout(PathBuf),       // \u003e\n    StdoutAppend(PathBuf), // \u003e\u003e\n    Stdin(PathBuf),        // \u003c\n    Stderr(PathBuf),       // 2\u003e\n    StderrToStdout,        // 2\u003e\u00261\n    Both(PathBuf),         // \u0026\u003e\n}\n\npub struct Command {\n    // ... existing fields\n    pub redirects: Vec\u003cRedirect\u003e,\n}\n```\n\n## Files to Modify\n- src/parser/ast.rs - Add Redirect enum to AST\n- src/lexer/mod.rs - Tokenize redirect operators\n- src/parser/mod.rs - Parse redirections\n- src/executor/mod.rs - Set up file descriptors before exec\n\n## Testing\n- Test all redirect operators individually\n- Test redirect with pipes\n- Test redirect with builtins\n- Test redirect file permissions\n- Test redirect error handling (read-only filesystem, etc.)\n\n## Estimated Effort: 2 days","status":"closed","priority":1,"issue_type":"task","owner":"a@kf.cafe","created_at":"2026-01-20T05:01:33.733795-08:00","created_by":"Asher","updated_at":"2026-01-20T05:25:20.553727-08:00","closed_at":"2026-01-20T05:25:20.553731-08:00","labels":["critical","p0","redirection","rush","stability"],"dependencies":[{"issue_id":"rush-bvw.3","depends_on_id":"rush-bvw","type":"parent-child","created_at":"2026-01-20T05:01:33.736126-08:00","created_by":"Asher"}]}
{"id":"rush-bvw.4","title":"STABILITY-004: Subshell Support","description":"As a shell scripter, I need subshells `( )` so that I can isolate environment changes and run commands in isolated contexts.\n\n## Priority: P0 - BLOCKING\nMany scripts rely on subshells for environment isolation.\n\n## Problem\n- No support for `( )` subshells\n- Cannot isolate environment changes\n- Scripts using subshells fail\n\n## Acceptance Criteria\n- [ ] Parse `( )` syntax correctly\n- [ ] Subshell gets isolated runtime/environment\n- [ ] Variables set in subshell don't affect parent\n- [ ] `cd` in subshell doesn't affect parent\n- [ ] Subshell exit code propagates correctly\n- [ ] Works with pipes: `(cd /tmp \u0026\u0026 ls) | grep foo`\n- [ ] Nested subshells work: `((echo nested))`\n- [ ] cargo test passes (all tests including subshell tests)\n- [ ] cargo build --release succeeds\n- [ ] cargo clippy -- -D warnings passes\n\n## Technical Implementation\n```rust\n// In parser/ast.rs\npub enum Statement {\n    // ... existing variants\n    Subshell(Vec\u003cStatement\u003e),\n}\n\n// In executor/mod.rs\nStatement::Subshell(statements) =\u003e {\n    let mut child_runtime = self.runtime.clone();\n    let mut child_executor = Executor::with_runtime(child_runtime);\n    child_executor.execute(statements)\n}\n```\n\n## Files to Modify\n- src/parser/ast.rs - Add Subshell variant\n- src/lexer/mod.rs - Tokenize `(` and `)`\n- src/parser/mod.rs - Parse subshell blocks\n- src/executor/mod.rs - Execute with cloned runtime\n- src/runtime/mod.rs - Ensure runtime is Clone\n\n## Testing\n- Test variable isolation\n- Test directory isolation (cd)\n- Test exit code propagation\n- Test nested subshells\n- Test subshells in pipes\n\n## Estimated Effort: 1-2 days","status":"closed","priority":1,"issue_type":"task","owner":"a@kf.cafe","created_at":"2026-01-20T05:01:33.945208-08:00","created_by":"Asher","updated_at":"2026-01-20T05:21:32.64762-08:00","closed_at":"2026-01-20T05:21:32.647709-08:00","labels":["critical","p0","rush","stability","subshells"],"dependencies":[{"issue_id":"rush-bvw.4","depends_on_id":"rush-bvw","type":"parent-child","created_at":"2026-01-20T05:01:33.947387-08:00","created_by":"Asher"}]}
{"id":"rush-bvw.5","title":"STABILITY-005: Exit Code Propagation","description":"As a shell scripter, I need proper exit code handling so that error detection and conditional execution work correctly.\n\n## Priority: P0 - BLOCKING\nEssential for error handling in scripts.\n\n## Problem\n- Exit codes not properly propagated through pipelines\n- No $? variable support\n- Scripts using `set -e` or `||` fail\n\n## Acceptance Criteria\n- [ ] $? variable contains last exit code\n- [ ] Pipeline exit code is last command (default)\n- [ ] Pipeline exit code is first failure (with set -o pipefail)\n- [ ] `command \u0026\u0026 next` only runs if success\n- [ ] `command || fallback` only runs if failure\n- [ ] Exit codes work with builtins\n- [ ] Exit codes work with external commands\n- [ ] cargo test passes (all tests including exit code tests)\n- [ ] cargo build --release succeeds\n- [ ] cargo clippy -- -D warnings passes\n\n## Technical Implementation\n```rust\n// In runtime/mod.rs\npub fn set_last_exit_code(\u0026mut self, code: i32) {\n    self.set_variable(\"?\".to_string(), code.to_string());\n}\n\npub fn get_last_exit_code(\u0026self) -\u003e i32 {\n    self.get_variable(\"?\")\n        .and_then(|s| s.parse().ok())\n        .unwrap_or(0)\n}\n```\n\n## Files to Modify\n- src/runtime/mod.rs - Add $? special variable\n- src/executor/pipeline.rs - Track exit codes through pipeline\n- src/executor/mod.rs - Update last exit code after each command\n- src/parser/mod.rs - Parse \u0026\u0026 and || operators\n\n## Testing\n- Test $? variable after success and failure\n- Test pipeline exit codes\n- Test \u0026\u0026 conditional execution\n- Test || conditional execution\n- Test mixed conditions\n\n## Estimated Effort: 1 day","status":"closed","priority":1,"issue_type":"task","owner":"a@kf.cafe","created_at":"2026-01-20T05:01:34.168774-08:00","created_by":"Asher","updated_at":"2026-01-20T05:21:40.592702-08:00","closed_at":"2026-01-20T05:21:40.592708-08:00","labels":["critical","exit-codes","p0","rush","stability"],"dependencies":[{"issue_id":"rush-bvw.5","depends_on_id":"rush-bvw","type":"parent-child","created_at":"2026-01-20T05:01:34.170752-08:00","created_by":"Asher"}]}
{"id":"rush-bvw.6","title":"STABILITY-006: Proper Variable Expansion","description":"As a shell scripter, I need POSIX variable expansion so that my scripts can handle defaults, errors, and string manipulation.\n\n## Priority: P1 - HIGH\nCritical for POSIX compatibility.\n\n## Acceptance Criteria\n- [ ] ${VAR} - Braced variables\n- [ ] ${VAR:-default} - Use default if unset\n- [ ] ${VAR:=default} - Assign default if unset\n- [ ] ${VAR:?error} - Error if unset\n- [ ] ${VAR#pattern} - Remove shortest prefix match\n- [ ] ${VAR##pattern} - Remove longest prefix match\n- [ ] ${VAR%pattern} - Remove shortest suffix match\n- [ ] ${VAR%%pattern} - Remove longest suffix match\n- [ ] Works with arrays/lists (future)\n- [ ] cargo test passes (all tests including expansion tests)\n- [ ] cargo build --release succeeds\n- [ ] cargo clippy -- -D warnings passes\n\n## Technical Implementation\n```rust\npub fn expand_variable(\u0026self, expr: \u0026str) -\u003e Result\u003cString\u003e {\n    // Parse ${VAR:-default} syntax\n    // Apply transformation based on operator\n    // Return expanded value\n}\n```\n\n## Files to Modify\n- src/runtime/mod.rs - Implement variable expansion\n- src/lexer/mod.rs - Tokenize braced variables\n- src/parser/mod.rs - Parse variable expansions\n\n## Testing\n- Test all expansion operators\n- Test nested expansions\n- Test edge cases (empty, unset, special chars)\n\n## Estimated Effort: 2 days","status":"closed","priority":2,"issue_type":"task","owner":"a@kf.cafe","created_at":"2026-01-20T05:01:34.399799-08:00","created_by":"Asher","updated_at":"2026-01-20T09:52:55.352827-08:00","closed_at":"2026-01-20T09:52:55.352829-08:00","labels":["p1","posix","rush","stability","variables"],"dependencies":[{"issue_id":"rush-bvw.6","depends_on_id":"rush-bvw","type":"parent-child","created_at":"2026-01-20T05:01:34.401841-08:00","created_by":"Asher"}]}
{"id":"rush-bvw.7","title":"STABILITY-007: Wildcard Expansion (Globbing)","description":"As a shell user, I need glob patterns to work so that I can match multiple files with wildcards.\n\n## Priority: P1 - HIGH\nBasic shell functionality.\n\n## Acceptance Criteria\n- [ ] `*` matches any characters\n- [ ] `?` matches single character\n- [ ] `[...]` character classes work\n- [ ] `**` recursive glob (bonus)\n- [ ] Dotfiles not matched by default\n- [ ] Empty glob returns error (not literal)\n- [ ] Works with multiple patterns\n- [ ] cargo test passes (all tests including glob tests)\n- [ ] cargo build --release succeeds\n- [ ] cargo clippy -- -D warnings passes\n\n## Technical Implementation\n```rust\nuse glob::glob;\n\nfn expand_globs(pattern: \u0026str) -\u003e Result\u003cVec\u003cPathBuf\u003e\u003e {\n    let matches = glob(pattern)?\n        .filter_map(Result::ok)\n        .collect();\n    Ok(matches)\n}\n```\n\n## Files to Modify\n- src/executor/mod.rs - Expand globs before execution\n- Cargo.toml - Add glob crate\n\n## Testing\n- Test * expansion\n- Test ? expansion\n- Test [...] expansion\n- Test dotfile handling\n- Test no matches error\n\n## Estimated Effort: 1 day","status":"closed","priority":2,"issue_type":"task","owner":"a@kf.cafe","created_at":"2026-01-20T05:01:34.612126-08:00","created_by":"Asher","updated_at":"2026-01-20T08:54:19.47628-08:00","closed_at":"2026-01-20T08:54:19.476285-08:00","labels":["globbing","p1","rush","stability"],"dependencies":[{"issue_id":"rush-bvw.7","depends_on_id":"rush-bvw","type":"parent-child","created_at":"2026-01-20T05:01:34.614382-08:00","created_by":"Asher"}]}
{"id":"rush-bvw.8","title":"STABILITY-008: Command Substitution","description":"As a shell scripter, I need command substitution so that I can use command output in other commands.\n\n## Priority: P1 - HIGH\nEssential for shell scripting.\n\n## Acceptance Criteria\n- [ ] $(command) syntax works\n- [ ] \\`command\\` backticks work (bonus)\n- [ ] Nested substitution works: $(echo $(pwd))\n- [ ] Substitution in strings: \"path: $(pwd)\"\n- [ ] Exit code of substituted command available\n- [ ] Whitespace handling correct (trimming)\n- [ ] Works in pipes and redirects\n- [ ] cargo test passes (all tests including substitution tests)\n- [ ] cargo build --release succeeds\n- [ ] cargo clippy -- -D warnings passes\n\n## Technical Implementation\n```rust\npub fn execute_command_substitution(\u0026mut self, command: \u0026str) -\u003e Result\u003cString\u003e {\n    let result = self.execute_line(command)?;\n    Ok(result.stdout.trim_end().to_string())\n}\n```\n\n## Files to Modify\n- src/parser/mod.rs - Parse $() syntax\n- src/executor/mod.rs - Execute and capture output\n- src/runtime/mod.rs - Substitute into parent command\n\n## Testing\n- Test simple substitution\n- Test nested substitution\n- Test substitution in strings\n- Test whitespace handling\n\n## Estimated Effort: 1 day","status":"closed","priority":2,"issue_type":"task","owner":"a@kf.cafe","created_at":"2026-01-20T05:01:34.810327-08:00","created_by":"Asher","updated_at":"2026-01-20T05:53:39.428782-08:00","closed_at":"2026-01-20T05:53:39.428785-08:00","labels":["p1","rush","stability","substitution"],"dependencies":[{"issue_id":"rush-bvw.8","depends_on_id":"rush-bvw","type":"parent-child","created_at":"2026-01-20T05:01:34.811586-08:00","created_by":"Asher"}]}
{"id":"rush-bvw.9","title":"STABILITY-009: Job Control (Background Jobs)","description":"As a power user, I need job control so that I can run long tasks in the background and manage multiple jobs.\n\n## Priority: P2 - MEDIUM\nImportant for UX, not critical for basic shell use.\n\n## Acceptance Criteria\n- [ ] `command \u0026` runs in background\n- [ ] `jobs` builtin lists background jobs\n- [ ] `fg [job]` brings job to foreground\n- [ ] `bg [job]` continues stopped job in background\n- [ ] `kill %job` kills job by number\n- [ ] SIGCHLD handler for job status updates\n- [ ] Job status shown in prompt (optional)\n- [ ] cargo test passes (all tests including job tests)\n- [ ] cargo build --release succeeds\n- [ ] cargo clippy -- -D warnings passes\n\n## Technical Implementation\n```rust\npub struct JobManager {\n    jobs: Vec\u003cJob\u003e,\n}\n\npub struct Job {\n    id: usize,\n    pid: u32,\n    command: String,\n    status: JobStatus,\n}\n\nenum JobStatus {\n    Running,\n    Stopped,\n    Done,\n}\n```\n\n## Files to Modify\n- src/executor/mod.rs - Handle \u0026 operator\n- src/runtime/mod.rs - Add JobManager\n- src/builtins/mod.rs - Add jobs, fg, bg builtins\n- src/main.rs - Handle SIGCHLD\n\n## Testing\n- Test background execution\n- Test jobs listing\n- Test fg/bg commands\n- Test job completion detection\n\n## Estimated Effort: 3 days","status":"closed","priority":3,"issue_type":"task","owner":"a@kf.cafe","created_at":"2026-01-20T05:01:35.011933-08:00","created_by":"Asher","updated_at":"2026-01-20T09:52:55.418415-08:00","closed_at":"2026-01-20T09:52:55.418417-08:00","labels":["job-control","p2","rush","stability"],"dependencies":[{"issue_id":"rush-bvw.9","depends_on_id":"rush-bvw","type":"parent-child","created_at":"2026-01-20T05:01:35.013218-08:00","created_by":"Asher"}]}
{"id":"rush-cqr","title":"Add configuration file support","description":"Rush needs a configuration file system (.rushrc or similar) to: 1) Set default options, 2) Define aliases, 3) Configure history settings, 4) Set environment variables, 5) Define custom functions, 6) Configure prompt","status":"open","priority":2,"issue_type":"feature","owner":"a@kf.cafe","created_at":"2026-01-20T03:03:07.961014-08:00","created_by":"Asher","updated_at":"2026-01-20T03:03:07.961014-08:00","labels":["enhancement","phase4"]}
{"id":"rush-daemon-perf","title":"Daemon Performance Optimization - Achieve \u003c1ms Startup","description":"Optimize Rush daemon to achieve sub-millisecond startup overhead.\n\n## Current Status\n- Direct execution: 4.5ms ± 0.8ms\n- Daemon execution: 9.3ms ± 1.6ms\n- **Current overhead: 4.8ms** (vs target of 0.4ms)\n\n## Goal\nReduce daemon overhead from 4.8ms to \u003c1ms through architectural improvements.\n\n## Success Criteria\n- Daemon execution \u003c 5.5ms (better than direct execution)\n- Ideally \u003c 2ms total (80%+ improvement)\n- All tests passing\n- No regression in functionality\n- Stdout/stderr capture still working\n\n## Strategy\nThree-phase optimization approach:\n1. **Binary serialization** (80 LOC, quick win) - 0.3ms saved\n2. **Persistent workers** (250 LOC, core fix) - 2-3ms saved  \n3. **Reusable executors** (120 LOC, polish) - 1-2ms saved\n\n## Philosophy\nProfile-driven optimization:\n- Measure before/after each change\n- Focus on biggest bottlenecks first\n- Don't over-engineer\n- Keep code maintainable","status":"open","priority":1,"issue_type":"epic","owner":"a@kf.cafe","created_at":"2026-01-20T20:00:00-08:00","created_by":"Asher","updated_at":"2026-01-20T20:00:00-08:00","labels":["daemon","epic","optimization","performance"]}
{"id":"rush-daemon-perf.1","title":"Binary Serialization for IPC Protocol","description":"Replace JSON serialization with binary format (bincode/MessagePack) for faster encoding/decoding.\n\n## Priority: P2 - Quick Win\nLow effort, immediate improvement. Good warmup task.\n\n## Current Implementation\n- Using serde_json for human-readable debugging\n- JSON encoding/decoding adds ~0.3-0.5ms overhead\n- Protocol is length-prefixed binary with JSON payload\n\n## Proposed Solution\nReplace serde_json with bincode (or rmp for MessagePack):\n- Same serde traits, just different serializer\n- Binary format is more compact\n- Faster encoding/decoding\n- Still type-safe\n\n## Acceptance Criteria\n- [ ] Replace serde_json with bincode in src/daemon/protocol.rs\n- [ ] Update encode_message() and decode_message()\n- [ ] All protocol tests pass\n- [ ] Benchmark shows 0.2-0.4ms improvement\n- [ ] cargo test passes\n- [ ] cargo build --release succeeds\n\n## Implementation Steps\n1. Add bincode dependency to Cargo.toml\n2. Replace serde_json::to_vec with bincode::serialize\n3. Replace serde_json::from_slice with bincode::deserialize\n4. Update tests\n5. Benchmark before/after\n\n## Files Modified\n- Cargo.toml (add bincode)\n- src/daemon/protocol.rs (~50 LOC changes)\n\n## Testing\n- All existing protocol tests should pass unchanged\n- Add benchmark comparison test\n\n## Estimated Effort\n~30 minutes\n\n## Expected Speedup\n0.2-0.4ms reduction in daemon overhead","status":"open","priority":2,"issue_type":"task","owner":"a@kf.cafe","created_at":"2026-01-20T20:00:00-08:00","created_by":"Asher","updated_at":"2026-01-20T20:00:00-08:00","labels":["daemon","easy","performance","quick-win"],"dependencies":[{"issue_id":"rush-daemon-perf.1","depends_on_id":"rush-daemon-perf","type":"parent-child","created_at":"2026-01-20T20:00:00-08:00","created_by":"Asher"}]}
{"id":"rush-daemon-perf.2","title":"Persistent Worker Process Pool","description":"Replace fork-per-request with persistent worker pool to eliminate process creation overhead.\n\n## Priority: P0 - CRITICAL\nBiggest performance win. Core architectural fix.\n\n## Current Implementation\n- Each client request triggers fork() in accept_connection()\n- Worker process created, executes command, exits\n- Wasteful: full process creation + teardown per command\n- Overhead: ~2-3ms per request\n\n## Proposed Solution\nMaintain a pool of long-lived worker processes:\n- Pre-spawn N workers at daemon startup (N=4-8)\n- Workers listen on internal channels for requests\n- Dispatch requests to available workers\n- Workers reset state between requests (chdir, env vars)\n- Monitor worker health, respawn if needed\n\n## Architecture\n```rust\nstruct WorkerPool {\n    workers: Vec\u003cWorker\u003e,\n    request_queue: mpsc::Sender\u003cSessionRequest\u003e,\n    available: Arc\u003cAtomicUsize\u003e,\n}\n\nstruct Worker {\n    pid: Pid,\n    channel: UnixStream,\n    state: WorkerState,\n}\n```\n\n## Acceptance Criteria\n- [ ] WorkerPool struct created in src/daemon/worker_pool.rs\n- [ ] Pre-spawn 4-8 workers at daemon startup\n- [ ] Request dispatching to available workers\n- [ ] Worker state reset between requests (cwd, env, executor)\n- [ ] Worker health monitoring and auto-respawn\n- [ ] Graceful worker shutdown on daemon exit\n- [ ] All existing tests pass\n- [ ] New worker pool tests added\n- [ ] Benchmark shows 2-3ms improvement\n- [ ] cargo test passes\n- [ ] cargo build --release succeeds\n\n## Implementation Steps\n1. Create src/daemon/worker_pool.rs\n2. Design Worker struct with persistent state\n3. Implement worker spawn/manage/retire logic\n4. Add request queue/dispatch mechanism\n5. Implement state reset between requests\n6. Add health monitoring\n7. Update server.rs to use worker pool\n8. Update tests\n9. Benchmark\n\n## Files Created\n- src/daemon/worker_pool.rs (~200 LOC)\n\n## Files Modified  \n- src/daemon/server.rs (~100 LOC changes)\n- src/daemon/mod.rs (exports)\n\n## Challenges\n- State isolation between requests\n- Detecting worker hangs/crashes\n- Balancing pool size vs memory\n- Handling worker backpressure\n\n## Testing\n- Worker spawn/shutdown\n- Request dispatching\n- State reset verification\n- Worker failure recovery\n- Concurrent request handling\n- Load testing\n\n## Estimated Effort\n4-6 hours\n\n## Expected Speedup\n2-3ms reduction in daemon overhead (biggest win)","status":"open","priority":1,"issue_type":"task","owner":"a@kf.cafe","created_at":"2026-01-20T20:00:00-08:00","created_by":"Asher","updated_at":"2026-01-20T20:00:00-08:00","labels":["architecture","critical","daemon","performance"],"dependencies":[{"issue_id":"rush-daemon-perf.2","depends_on_id":"rush-daemon-perf","type":"parent-child","created_at":"2026-01-20T20:00:00-08:00","created_by":"Asher"}]}
{"id":"rush-daemon-perf.3","title":"Reusable Executor Instances","description":"Reset executor state between commands instead of creating new instances.\n\n## Priority: P1 - Important\nGood follow-up to persistent workers. Eliminates initialization overhead.\n\n## Current Implementation\n- Each command creates new Executor::new_embedded()\n- Executor contains Runtime, Builtins, Corrector\n- All state allocated fresh per command\n- Overhead: ~1-2ms per request\n\n## Proposed Solution\nAdd reset() methods to reuse executor instances:\n- Executor::reset() - resets all subsystems\n- Runtime::reset() - clears variables, resets state\n- Keep executors in worker processes\n- Reset between commands instead of recreate\n\n## Architecture\n```rust\nimpl Executor {\n    pub fn reset(\u0026mut self) -\u003e Result\u003c()\u003e {\n        self.runtime.reset()?;\n        // Builtins and Corrector are stateless\n        Ok(())\n    }\n}\n\nimpl Runtime {\n    pub fn reset(\u0026mut self) -\u003e Result\u003c()\u003e {\n        self.variables.clear();\n        self.set_last_exit_code(0);\n        self.scopes.clear();\n        self.call_stack.clear();\n        self.positional_params.clear();\n        self.positional_stack.clear();\n        self.function_depth = 0;\n        // Keep history, undo_manager, job_manager\n        Ok(())\n    }\n}\n```\n\n## Acceptance Criteria\n- [ ] Executor::reset() method implemented\n- [ ] Runtime::reset() method implemented\n- [ ] Workers reuse executor instances\n- [ ] All state properly cleared between commands\n- [ ] No state leakage between requests\n- [ ] All existing tests pass\n- [ ] New reset tests added\n- [ ] Benchmark shows 1-2ms improvement\n- [ ] cargo test passes\n- [ ] cargo build --release succeeds\n\n## Implementation Steps\n1. Add Executor::reset() in src/executor/mod.rs\n2. Add Runtime::reset() in src/runtime/mod.rs\n3. Update worker code to reuse executors\n4. Add comprehensive state reset tests\n5. Verify no state leakage\n6. Benchmark\n\n## Files Modified\n- src/executor/mod.rs (~50 LOC)\n- src/runtime/mod.rs (~70 LOC)\n- src/daemon/worker_pool.rs (~20 LOC)\n\n## Challenges\n- Identifying all state to clear\n- Deciding what to keep (history, jobs?)\n- Testing for state leakage\n- Edge cases (partial execution, errors)\n\n## Testing\n- Reset clears all relevant state\n- No leakage between commands\n- Variables don't persist\n- Exit codes reset properly\n- Error conditions\n\n## Estimated Effort\n2-3 hours\n\n## Expected Speedup\n1-2ms reduction in daemon overhead\n\n## Dependencies\nShould be implemented after rush-daemon-perf.2 (persistent workers)","status":"open","priority":2,"issue_type":"task","owner":"a@kf.cafe","created_at":"2026-01-20T20:00:00-08:00","created_by":"Asher","updated_at":"2026-01-20T20:00:00-08:00","labels":["daemon","optimization","performance"],"dependencies":[{"issue_id":"rush-daemon-perf.3","depends_on_id":"rush-daemon-perf","type":"parent-child","created_at":"2026-01-20T20:00:00-08:00","created_by":"Asher"},{"issue_id":"rush-daemon-perf.3","depends_on_id":"rush-daemon-perf.2","type":"blocks","created_at":"2026-01-20T20:00:00-08:00","created_by":"Asher"}]}
{"id":"rush-daemon-perf.4","title":"Performance Benchmarking and Verification","description":"Comprehensive benchmarking suite to measure and verify all performance improvements.\n\n## Priority: P1 - Important\nEssential for validating optimizations and preventing regressions.\n\n## Objectives\n- Establish baseline performance metrics\n- Measure impact of each optimization\n- Create automated benchmark suite\n- Prevent performance regressions\n\n## Acceptance Criteria\n- [ ] Benchmark suite using hyperfine or criterion\n- [ ] Measure daemon startup overhead\n- [ ] Measure command execution latency\n- [ ] Measure throughput (commands/sec)\n- [ ] Compare before/after for each optimization\n- [ ] Document results in benchmarks/RESULTS.md\n- [ ] CI integration to detect regressions\n- [ ] Target achieved: \u003c5.5ms total, \u003c1ms overhead\n\n## Benchmarks to Track\n1. **Cold Start**: First command after daemon start\n2. **Warm Execution**: Subsequent commands\n3. **Concurrent Load**: Multiple clients\n4. **Large Output**: Commands with MB+ output\n5. **Error Cases**: Failed commands, timeouts\n\n## Metrics\n- Latency: p50, p95, p99\n- Throughput: commands/second\n- Memory: daemon RSS, worker RSS\n- CPU: daemon CPU%, worker CPU%\n\n## Implementation\n- Create benches/ directory\n- Add benchmark scripts\n- Use hyperfine for end-to-end\n- Use criterion for microbenchmarks\n- Document methodology\n\n## Files Created\n- benches/daemon_latency.rs\n- benches/throughput.sh\n- benchmarks/RESULTS.md\n\n## Expected Results\n| Metric | Baseline | After Binary | After Workers | After Reuse | Target |\n|--------|----------|--------------|---------------|-------------|--------|\n| Latency | 9.3ms | 8.9ms | 6.0ms | 4.5ms | \u003c5.5ms |\n| Overhead | 4.8ms | 4.4ms | 1.5ms | 0.0ms | \u003c1.0ms |\n\n## Estimated Effort\n2-3 hours\n\n## Dependencies\nRun after each optimization to measure impact","status":"open","priority":2,"issue_type":"task","owner":"a@kf.cafe","created_at":"2026-01-20T20:00:00-08:00","created_by":"Asher","updated_at":"2026-01-20T20:00:00-08:00","labels":["benchmarking","daemon","performance","testing"],"dependencies":[{"issue_id":"rush-daemon-perf.4","depends_on_id":"rush-daemon-perf","type":"parent-child","created_at":"2026-01-20T20:00:00-08:00","created_by":"Asher"}]}
{"id":"rush-doc1","title":"User Guide - Common Tasks","description":"Create practical user guide for everyday Rush usage.\n\n## Purpose\nHelp users accomplish common tasks without reading source code.\n\n## Contents\n1. **Basic Navigation**\n   - cd, pwd, changing directories\n   - Working with paths and ~\n   - Directory history\n\n2. **File Operations**\n   - Viewing files (cat)\n   - Searching (grep, find)\n   - Listing (ls with common flags)\n   - File patterns and globs\n\n3. **Pipelines \u0026 Redirection**\n   - Connecting commands with |\n   - Redirecting output (\u003e, \u003e\u003e, 2\u003e, \u0026\u003e)\n   - Command substitution $()\n   - Here documents\n\n4. **Variables**\n   - Setting: export FOO=bar\n   - Using: $FOO, ${FOO}\n   - Expansion: ${VAR:-default}\n   - Special variables: $?, $HOME, etc.\n\n5. **Job Control**\n   - Background jobs (\u0026)\n   - Listing jobs\n   - Bringing to foreground (fg)\n   - Stopping jobs\n\n## Format\n- Clear examples for each task\n- Show both command and output\n- Include common pitfalls\n- Link to related topics\n\n## Deliverable\ndocs/USER_GUIDE.md","status":"open","priority":2,"issue_type":"epic","owner":"a@kf.cafe","created_at":"2026-01-20T18:00:00-08:00","created_by":"Asher","updated_at":"2026-01-20T18:00:00-08:00","labels":["documentation","phase4","user-guide"]}
{"id":"rush-doc2","title":"Configuration Guide","description":"Document how to configure Rush for daily use.\n\n## Purpose\nShow users how to customize Rush to match their workflow.\n\n## Contents\n1. **Initialization Files**\n   - ~/.rush_profile (login shells)\n   - ~/.rushrc (interactive shells)\n   - When each is loaded\n   - Execution order\n\n2. **Common Configurations**\n   - Setting up aliases\n   - Customizing prompt\n   - Setting environment variables\n   - Defining functions\n   - History settings\n\n3. **Shell Options**\n   - set -e (exit on error)\n   - set -u (error on undefined)\n   - set -x (debug mode)\n   - set -o pipefail\n\n4. **Integrations**\n   - Git setup\n   - Cargo/Rust integration\n   - Node/npm setup\n   - Custom completions\n\n5. **Examples**\n   - Minimal .rushrc\n   - Power user .rushrc\n   - Team shared .rushrc\n   - Migration from .bashrc/.zshrc\n\n## Format\n- Working example configs\n- Explain each section\n- Show before/after\n- Include comments in examples\n\n## Deliverable\ndocs/CONFIGURATION.md\nExamples in examples/.rushrc.{minimal,power,team}","status":"open","priority":2,"issue_type":"epic","owner":"a@kf.cafe","created_at":"2026-01-20T18:00:00-08:00","created_by":"Asher","updated_at":"2026-01-20T18:00:00-08:00","labels":["configuration","documentation","phase4"]}
{"id":"rush-doc3","title":"Builtin Command Reference","description":"Complete reference for all Rush builtins.\n\n## Purpose\nProvide quick lookup for builtin commands and flags.\n\n## Contents\nFor each builtin:\n- Name and purpose\n- Syntax\n- Flags and options\n- Examples (basic and advanced)\n- Exit codes\n- See also (related commands)\n\n## Builtins to Document\n- cd, pwd, echo, exit, export\n- cat, ls, grep, find\n- git-status\n- jobs, fg, bg\n- alias, unalias\n- history\n- set\n- undo\n- help\n- type\n- test/[\n- mkdir\n\n## Format\nMarkdown with:\n- Synopsis section\n- Description\n- Options table\n- Examples section\n- Notes/caveats\n- Performance notes (vs GNU)\n\n## Deliverable\ndocs/BUILTINS.md\n\n## Stretch\nGenerate from --help flags in code","status":"open","priority":3,"issue_type":"epic","owner":"a@kf.cafe","created_at":"2026-01-20T18:00:00-08:00","created_by":"Asher","updated_at":"2026-01-20T18:00:00-08:00","labels":["documentation","phase4","reference"]}
{"id":"rush-doc4","title":"Troubleshooting Guide","description":"Help users debug common issues.\n\n## Purpose\nGet users unstuck when things go wrong.\n\n## Contents\n1. **Common Errors**\n   - Command not found\n   - Permission denied\n   - Syntax errors\n   - Broken pipe\n   - Exit code meanings\n\n2. **Performance Issues**\n   - Shell feels slow\n   - Commands hanging\n   - High memory usage\n   - How to identify bottleneck\n\n3. **Compatibility Issues**\n   - Bash script doesn't work\n   - External tool behaves differently\n   - Terminal formatting issues\n   - Missing features\n\n4. **Recovery**\n   - How to exit stuck shell\n   - Kill hung processes\n   - Reset corrupted history\n   - Restore from undo backups\n\n5. **Getting Help**\n   - Reading error messages\n   - Enabling debug mode\n   - Filing bug reports\n   - Where to ask questions\n\n## Format\n- Problem/Solution pairs\n- Clear diagnostic steps\n- Copy-pasteable commands\n- Links to related docs\n\n## Deliverable\ndocs/TROUBLESHOOTING.md","status":"open","priority":3,"issue_type":"epic","owner":"a@kf.cafe","created_at":"2026-01-20T18:00:00-08:00","created_by":"Asher","updated_at":"2026-01-20T18:00:00-08:00","labels":["documentation","phase4","troubleshooting"]}
{"id":"rush-doc5","title":"Migration Guide from Bash/Zsh","description":"Help users transition from their current shell.\n\n## Purpose\nMake switching to Rush less scary and more successful.\n\n## Contents\n1. **What's Different**\n   - Syntax differences\n   - Missing features (and workarounds)\n   - New capabilities (undo, speed)\n   - Breaking changes from bash\n\n2. **Quick Start for Bash Users**\n   - 80% compatible commands\n   - What just works\n   - What needs adjustment\n   - Common gotchas\n\n3. **Quick Start for Zsh Users**\n   - Notable differences\n   - Plugin equivalents\n   - Oh-My-Zsh migration\n   - Theme alternatives\n\n4. **Porting Scripts**\n   - Testing compatibility\n   - Common rewrites needed\n   - When to stay with bash\n   - Dual-shell strategy\n\n5. **Porting Configs**\n   - .bashrc → .rushrc\n   - .zshrc → .rushrc\n   - Aliases\n   - Functions\n   - Environment variables\n\n## Format\n- Side-by-side examples\n- Before (bash) / After (rush)\n- Compatibility matrix\n- Migration checklist\n\n## Deliverable\ndocs/MIGRATION.md\nScript: scripts/migrate-bashrc.sh","status":"open","priority":2,"issue_type":"epic","owner":"a@kf.cafe","created_at":"2026-01-20T18:00:00-08:00","created_by":"Asher","updated_at":"2026-01-20T18:00:00-08:00","labels":["documentation","migration","phase4"]}
{"id":"rush-ey2","title":"Add -c flag for non-interactive command execution","description":"Rush currently only supports interactive mode. Add support for 'rush -c \"command\"' to run single commands non-interactively, similar to bash -c. This is needed for scripting and benchmarking.","status":"closed","priority":2,"issue_type":"feature","owner":"a@kf.cafe","created_at":"2026-01-20T03:02:49.131579-08:00","created_by":"Asher","updated_at":"2026-01-20T03:14:54.280054-08:00","closed_at":"2026-01-20T03:14:54.280054-08:00","close_reason":"Implemented -c flag for non-interactive command execution. Works perfectly. Benchmarks show ~5ms startup overhead per invocation, which is expected. Pure builtin performance (via Criterion) shows 17-427x speedup.","labels":["enhancement","phase4"]}
{"id":"rush-h09","title":"Add AI-powered command suggestions","description":"Implement AI-powered features: 1) Command suggestions based on context, 2) Error explanation and fixes, 3) Command completion using LLM, 4) Natural language to command translation, 5) Privacy-preserving local models option","status":"open","priority":4,"issue_type":"feature","owner":"a@kf.cafe","created_at":"2026-01-20T03:03:26.644664-08:00","created_by":"Asher","updated_at":"2026-01-20T03:03:26.644664-08:00","labels":["ai","enhancement","phase5"]}
{"id":"rush-hn1","title":"Benchmark Reproducibility Suite","description":"Create a comprehensive benchmark suite that users can run locally to verify Rush's performance claims.\n\n## Problem\nThe #1 HN criticism will be \"I don't trust these 225x/427x speedup claims.\" Users need to reproduce benchmarks on their own hardware.\n\n## Success Criteria\n- User-friendly benchmark runner: `rush --benchmark`\n- Quick mode for smoke testing: `rush --benchmark quick`\n- Comparison mode: `rush --benchmark compare` (Rush vs bash/zsh)\n- Generates detailed HTML reports with charts\n- Includes all benchmarked operations (cat, ls, find, grep, startup)\n- Works on macOS and Linux\n- Documents methodology and fairness\n- Results saved to `benchmark_results.json`\n- Can export to markdown for sharing\n\n## User Stories\n1. As a skeptical developer, I want to run benchmarks locally so I can verify performance claims\n2. As a potential user, I want quick smoke tests so I can see if Rush is faster on my hardware\n3. As a contributor, I want reproducible benchmarks so I can track performance regressions\n\n## Technical Notes\n- Build on existing criterion benchmarks\n- Add hyperfine integration for real-world comparisons\n- Include warmup runs to eliminate cold start bias\n- Document test data generation (file sizes, counts)\n- Ensure fair comparison (same operations, same data)\n- Add CI integration to track performance over time\n\n## Deliverables\n- `scripts/user_benchmark.sh` - Main benchmark runner\n- `scripts/quick_benchmark.sh` - Fast smoke test\n- Markdown report generation\n- HTML visualization (using criterion's output)\n- Documentation in docs/BENCHMARKING.md","status":"open","priority":1,"issue_type":"epic","owner":"a@kf.cafe","created_at":"2026-01-20T17:30:00-08:00","created_by":"Asher","updated_at":"2026-01-20T17:30:00-08:00","labels":["benchmarking","hn-feature","observability","phase4"]}
{"id":"rush-hn2","title":"Performance Profiling Built-in","description":"Add built-in performance profiling to show where time is spent during command execution.\n\n## Problem\nUsers criticize 4.0ms startup vs bash's 2.5ms. Turn this into a feature by showing that fast builtins compensate. Demonstrate transparency and observability.\n\n## Success Criteria\n- `rush --profile -c 'command'` shows timing breakdown\n- Profiling available as builtin: `profile { commands }`\n- Shows: startup time, parse time, execution time per command\n- Differentiates builtin vs external command performance\n- Pipeline stage timing breakdown\n- Optional: Memory usage tracking\n- Zero overhead when not profiling\n- Clean, readable output format\n\n## User Stories\n1. As a developer, I want to see where time is spent so I understand performance characteristics\n2. As a user, I want to profile my scripts so I can optimize bottlenecks\n3. As a Rush advocate, I want to show how fast builtins compensate for startup overhead\n\n## Example Output\n```\n$ rush --profile -c 'ls | grep foo'\nPerformance Profile:\n  Shell startup:    4.0ms\n  Parse:            0.2ms\n  Execute 'ls':     0.1ms (builtin, 17x faster than GNU)\n  Execute 'grep':   0.05ms (builtin, 212x faster than GNU)\n  Pipeline setup:   0.1ms\n  Total:            4.45ms\n  \nComparison: bash -c 'ls | grep foo' = 12.3ms (2.8x slower)\n```\n\n## Technical Notes\n- Use `std::time::Instant` for high-resolution timing\n- Add timing checkpoints in executor\n- Store metrics in executor state\n- Output formatter for human-readable display\n- Optional JSON output for tooling\n- Add `--profile-memory` for memory tracking (future)\n\n## Deliverables\n- `--profile` CLI flag\n- `profile` builtin command\n- Timing infrastructure in executor\n- Human-readable formatter\n- JSON output mode\n- Documentation and examples","status":"open","priority":1,"issue_type":"epic","owner":"a@kf.cafe","created_at":"2026-01-20T17:30:00-08:00","created_by":"Asher","updated_at":"2026-01-20T17:30:00-08:00","labels":["feature","hn-feature","observability","performance","phase4"]}
{"id":"rush-hn3","title":"Rust-Quality Error Messages","description":"Implement Rust-quality error messages with context, suggestions, and visual indicators.\n\n## Problem\nShells have notoriously bad error messages. Rust sets the gold standard. Rush should match that quality to differentiate from bash/zsh.\n\n## Success Criteria\n- Error messages show context (line/column for scripts)\n- Visual indicators point to error location (^^^^^)\n- Suggestions for common mistakes (\"Did you mean...?\")\n- Help text for fixing errors\n- Color-coded severity (error, warning, info)\n- Multi-line errors with context\n- Stack traces for complex errors (pipelines, functions)\n- Friendly, educational tone\n\n## User Stories\n1. As a new user, I want clear error messages so I can fix mistakes quickly\n2. As a scripter, I want line numbers and context so I can debug scripts\n3. As a typo-prone user, I want suggestions so I don't have to look up syntax\n\n## Example Output\n```\nError: Unknown flag '--invalid-flag'\n  |\n3 | ls --invalid-flag /tmp\n  |    ^^^^^^^^^^^^^^\n  |\n  = help: Did you mean '--all' (-a)?\n  = help: Run 'ls --help' for available flags\n  \nError: Command not found: 'carg'\n  |\n  = help: Did you mean 'cargo'?\n  = note: Similar commands: cargo, cat, cd\n```\n\n## Technical Implementation\n- Create error types with context\n- Track source locations during parsing\n- Implement fuzzy matching for suggestions\n- Build error formatter with colors\n- Add help text database\n- Use `miette` or similar crate for beautiful errors\n\n## Deliverables\n- Error context tracking in parser\n- Rich error types\n- Error formatter with colors\n- Suggestion engine\n- Help text database\n- Examples in documentation","status":"open","priority":2,"issue_type":"epic","owner":"a@kf.cafe","created_at":"2026-01-20T17:30:00-08:00","created_by":"Asher","updated_at":"2026-01-20T17:30:00-08:00","labels":["error-handling","feature","hn-feature","phase4","ux"]}
{"id":"rush-hn4","title":"Time Builtin with Breakdown","description":"Implement a `time` builtin that shows performance breakdown for commands and pipelines.\n\n## Problem\nUsers want to understand where time is spent. Standard `time` only shows total. Rush should show per-stage breakdown for pipelines.\n\n## Success Criteria\n- `time command` shows execution time\n- Pipeline breakdown: time per stage\n- Differentiates builtin vs external\n- Shows overhead (parsing, piping, etc.)\n- Optional memory usage stats\n- Comparison to bash/zsh (optional)\n- Works with complex pipelines\n- Clean, readable output\n\n## User Stories\n1. As a performance-conscious user, I want to time commands so I can optimize workflows\n2. As a Rush user, I want to see pipeline stage times so I can identify bottlenecks\n3. As a skeptic, I want proof that Rush builtins are faster\n\n## Example Output\n```\n$ time find . -name \"*.rs\" | grep pub | wc -l\n42\n\nTiming:\n  find:      0.9ms (builtin, parallel traversal)\n  grep:      0.4ms (builtin, ripgrep)\n  wc:        0.1ms (builtin)\n  pipeline:  0.2ms (overhead)\n  total:     1.6ms\n  \n  Comparison: bash time = 380ms (237x faster)\n```\n\n## Technical Implementation\n- Add `time` builtin\n- Reuse profiling infrastructure from rush-hn2\n- Track time per pipeline stage\n- Format output clearly\n- Optional: benchmark against bash/zsh inline\n\n## Deliverables\n- `time` builtin command\n- Pipeline timing breakdown\n- Output formatter\n- Integration with profiling system\n- Tests and documentation","status":"open","priority":2,"issue_type":"epic","owner":"a@kf.cafe","created_at":"2026-01-20T17:30:00-08:00","created_by":"Asher","updated_at":"2026-01-20T17:30:00-08:00","labels":["builtin","feature","hn-feature","performance","phase4"]}
{"id":"rush-hn5","title":"Script Compatibility Checker","description":"Build a tool to check bash/zsh scripts for Rush compatibility and provide migration guidance.\n\n## Problem\nThe \"my bash scripts won't work\" concern. Need to make migration anxiety explicit with tooling that shows what's compatible and what isn't.\n\n## Success Criteria\n- `rush --check script.sh` analyzes bash scripts\n- Reports compatibility percentage\n- Lists incompatible syntax with line numbers\n- Suggests fixes or workarounds\n- Categorizes issues (supported, planned, not-supported)\n- Warns about POSIX vs bash-isms\n- Optional: Auto-migration suggestions\n- Works with .bashrc, .bash_profile, etc.\n\n## User Stories\n1. As a bash user, I want to know if my scripts will work so I can decide to adopt Rush\n2. As a migrator, I want to see what needs fixing so I can plan migration effort\n3. As a scripter, I want Rush to warn me about incompatibilities so I can adjust\n\n## Example Output\n```\n$ rush --check deploy.sh\n\nChecking: deploy.sh\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\nCompatibility: 87% (31/36 features)\n\n✓ Supported:\n  - Pipelines (lines 5, 12, 23)\n  - Redirections (lines 8, 15)\n  - Variables (lines 3, 7, 19)\n  - Functions (lines 10-14)\n  \n⚠ Warnings:\n  Line 12: Bash arrays not yet supported\n    | arr=(one two three)\n    Workaround: Use space-separated strings\n  \n✗ Not Supported:\n  Line 45: ${var:offset:length} substring syntax\n    | name=${filename:0:5}\n    Status: Planned for Phase 5\n    Workaround: Use external tool (cut/awk)\n\n💡 Suggestions:\n  - Consider using Rush-native syntax for new scripts\n  - Set POSIX mode for maximum compatibility\n  - See migration guide: rush.sh/migrate\n```\n\n## Technical Implementation\n- Parse bash syntax (use bash parser or tree-sitter)\n- Build compatibility database\n- Map bash features to Rush support status\n- Generate detailed reports\n- Track planned features for roadmap\n\n## Deliverables\n- `--check` CLI flag\n- Bash script parser/analyzer\n- Compatibility database\n- Report generator\n- Migration guide documentation\n- CI integration for script testing","status":"open","priority":2,"issue_type":"epic","owner":"a@kf.cafe","created_at":"2026-01-20T17:30:00-08:00","created_by":"Asher","updated_at":"2026-01-20T17:30:00-08:00","labels":["feature","hn-feature","migration","phase4","tooling"]}
{"id":"rush-hn6","title":"Advanced Shell Completion System","description":"Implement a comprehensive tab completion system with context-awareness and extensibility.\n\n## Problem\nTab completion is table stakes for shell adoption. Rush needs best-in-class completion: commands, flags, files, git branches, custom completions.\n\n## Success Criteria\n- Command completion from PATH\n- Builtin flag completion (e.g., `ls --\u003cTAB\u003e`)\n- File/directory completion with filtering\n- Git-aware completion (branches, commits, remotes)\n- Custom completion functions\n- Completion scripts in `~/.rush/completions/`\n- Fuzzy matching for partial matches\n- Description hints for completions\n- Fast (\u003c100ms latency)\n- Backwards compatible with bash completions (stretch)\n\n## User Stories\n1. As a user, I want command completion so I can work efficiently\n2. As a git user, I want branch completion so I don't have to type full names\n3. As a tool author, I want to provide Rush completions so my users have a great experience\n4. As a bash migrator, I want my existing completions to work\n\n## Example Behavior\n```\n$ rush git che\u003cTAB\u003e\nchecklist  checkout\n\n$ rush git checkout \u003cTAB\u003e\nmaster       (local branch)\nmain         (local branch) \nfeature/foo  (local branch)\norigin/dev   (remote branch)\n\n$ rush ls --\u003cTAB\u003e\n--all        -a   Show hidden files\n--long       -l   Long format\n--human      -h   Human-readable sizes\n--color           Colorize output\n```\n\n## Technical Implementation\n- Already have `src/completion/` module\n- Implement `Completer` trait fully\n- Add context-aware completion logic\n- Git completion using git2 crate\n- File completion with filtering\n- Custom completion script loader\n- Cache frequently used completions\n- Integration with reedline's completion system\n\n## Deliverables\n- Complete `Completer` implementation\n- Context-aware completion engine\n- Git completion support\n- Flag/option completion for builtins\n- Custom completion script system\n- Documentation and examples\n- Completion installation for popular tools","status":"open","priority":3,"issue_type":"epic","owner":"a@kf.cafe","created_at":"2026-01-20T17:30:00-08:00","created_by":"Asher","updated_at":"2026-01-20T17:30:00-08:00","labels":["completion","feature","hn-feature","phase4","ux"]}
{"id":"rush-hz3","title":"Implement job control (background jobs)","description":"Add support for background job execution and control: 1) Background operator (\u0026), 2) Job control commands (jobs, fg, bg), 3) Job status tracking, 4) Signal handling (Ctrl+Z), 5) Process group management","status":"open","priority":2,"issue_type":"feature","owner":"a@kf.cafe","created_at":"2026-01-20T03:02:58.644278-08:00","created_by":"Asher","updated_at":"2026-01-20T03:02:58.644278-08:00","labels":["enhancement","phase4"]}
{"id":"rush-j1d","title":"Add shell script execution support","description":"Rush needs to be able to execute .sh script files. Currently only supports interactive mode. This should include: 1) Shebang support (#!/usr/bin/env rush), 2) Script file argument (rush script.sh), 3) Script arguments (, , etc.), 4) Exit code handling","status":"open","priority":2,"issue_type":"feature","owner":"a@kf.cafe","created_at":"2026-01-20T03:02:54.035224-08:00","created_by":"Asher","updated_at":"2026-01-20T03:02:54.035224-08:00","labels":["enhancement","phase4"]}
{"id":"rush-j6k.3","title":"US-001: Script Execution","description":"As a developer, I want to execute Rush shell scripts from files so that I can automate tasks and run saved scripts.\n\n## Acceptance Criteria\n- [ ] Can execute .rush files: `rush script.rush`\n- [ ] Shebang support: `#!/usr/bin/env rush`\n- [ ] Script arguments accessible via $1, $2, etc.\n- [ ] Exit codes propagate correctly\n- [ ] Error messages show script name and line number\n- [ ] Scripts can source other scripts\n- [ ] cargo test passes (all tests including new script execution tests)\n- [ ] cargo build --release succeeds\n- [ ] cargo clippy -- -D warnings passes\n- [ ] Manual testing: run sample scripts with various features\n\n## Technical Notes\n- Modify src/executor/mod.rs to accept file input\n- Add script argument parsing\n- Implement file reading and execution loop\n- Add line number tracking for errors","status":"closed","priority":1,"issue_type":"task","owner":"a@kf.cafe","created_at":"2026-01-20T03:18:02.84824-08:00","created_by":"Asher","updated_at":"2026-01-20T03:51:05.069135-08:00","closed_at":"2026-01-20T03:51:05.069135-08:00","close_reason":"Closed","labels":["1.0","backend","critical","rush"]}
{"id":"rush-knj","title":"Fix test flakiness in parallel undo tests","description":"The test_track_and_undo_modify test fails in parallel execution mode due to shared ~/.rush_undo directory causing race conditions. Fix by: 1) Using unique test directories per test, 2) Ensuring proper cleanup, 3) Using test isolation","status":"closed","priority":1,"issue_type":"bug","owner":"a@kf.cafe","created_at":"2026-01-20T03:03:18.170767-08:00","created_by":"Asher","updated_at":"2026-01-20T03:47:27.540649-08:00","closed_at":"2026-01-20T03:47:27.540649-08:00","close_reason":"Closed","labels":["bug","testing"]}
{"id":"rush-mv0","title":"Fix benchmark comparison script (compare.sh)","description":"The current compare.sh script doesn't actually benchmark Rush due to lack of non-interactive execution support. Solutions: 1) Use new compare-v2.sh with Criterion benchmarks, 2) Add -c flag support first (depends on rush-ey2), 3) Create proper comparison output, 4) Generate HTML reports for visualization","status":"closed","priority":1,"issue_type":"bug","owner":"a@kf.cafe","created_at":"2026-01-20T03:03:42.814323-08:00","created_by":"Asher","updated_at":"2026-01-20T04:15:41.608622-08:00","closed_at":"2026-01-20T04:15:41.608622-08:00","close_reason":"Fixed! compare-fair.sh and compare-fixed.sh now properly benchmark Rush using -c flag. Added comprehensive benchmarking.md documentation.","labels":["benchmarking","bug"],"dependencies":[{"issue_id":"rush-mv0","depends_on_id":"rush-ey2","type":"blocks","created_at":"2026-01-20T03:03:42.815935-08:00","created_by":"Asher"}]}
{"id":"rush-scr","title":"Rush Scripting Support - Essential Builtins","description":"Implement essential scripting builtins to make Rush a full-featured shell for scripts, not just interactive use.\n\n## Motivation\nRush needs scripting support to enable:\n- Configuration files (~/.rushrc)\n- Git hooks\n- Build scripts\n- Editor integrations (Helix)\n- Automation and cron jobs\n\n## Success Criteria\n- All Tier 1 builtins implemented (read, true/false, return, local, shift)\n- All Tier 2 builtins implemented (trap, printf, eval, exec, unset)\n- All Tier 3 builtins implemented (command, builtin, kill, wait, pushd/popd/dirs)\n- Can run basic shell scripts\n- Can execute ~/.rushrc configuration\n- Integration tests for scripting scenarios\n- Documentation for all new builtins\n\n## Philosophy\nPOSIX-inspired, not POSIX-compliant:\n- Common patterns work (muscle memory)\n- Modern conveniences (better errors, safety)\n- Skip legacy cruft\n- Make scripting better than bash","status":"open","priority":1,"issue_type":"epic","owner":"a@kf.cafe","created_at":"2026-01-20T19:00:00-08:00","created_by":"Asher","updated_at":"2026-01-20T19:00:00-08:00","labels":["builtins","epic","phase4","scripting"]}
{"id":"rush-scr.1","title":"SCRIPT-001: read builtin","description":"As a shell scripter, I need the read builtin so I can get user input and process files line-by-line.\n\n## Priority: P0 - CRITICAL\nAbsolutely essential for any scripting. Can't write interactive scripts or process files without it.\n\n## Acceptance Criteria\n- [ ] Basic usage: `read varname`\n- [ ] Multiple variables: `read first second rest`\n- [ ] Prompt with -p: `read -p \"Enter name: \" name`\n- [ ] Silent input with -s: `read -s password` (for passwords)\n- [ ] Timeout with -t: `read -t 5 answer` (5 second timeout)\n- [ ] Read from stdin in loops: `while read line; do echo $line; done \u003c file.txt`\n- [ ] Handle IFS for field splitting\n- [ ] Exit code 0 on success, 1 on EOF\n- [ ] cargo test passes\n- [ ] cargo build --release succeeds\n- [ ] cargo clippy -- -D warnings passes\n\n## Use Cases\n```bash\n# Interactive input\nread -p \"Enter your name: \" username\necho \"Hello, $username\"\n\n# Password input (hidden)\nread -s -p \"Password: \" password\n\n# Process file line by line\nwhile read line; do\n  echo \"Line: $line\"\ndone \u003c data.txt\n\n# Multiple variables\nread first last \u003c\u003c\u003c \"John Doe\"\necho \"First: $first, Last: $last\"\n```\n\n## Technical Implementation\n- Add to src/builtins/read.rs\n- Handle stdin vs TTY input\n- Support IFS environment variable for field splitting\n- Timeout using select() or similar\n- Silent mode using terminal raw mode\n\n## Testing\n- Interactive input tests\n- File processing tests\n- Timeout behavior\n- EOF handling\n- Multiple variable assignment\n\n## Estimated Effort: 2 days","status":"open","priority":1,"issue_type":"task","owner":"a@kf.cafe","created_at":"2026-01-20T19:00:00-08:00","created_by":"Asher","updated_at":"2026-01-20T19:00:00-08:00","labels":["builtin","critical","p0","scripting"],"dependencies":[{"issue_id":"rush-scr.1","depends_on_id":"rush-scr","type":"parent-child","created_at":"2026-01-20T19:00:00-08:00","created_by":"Asher"}]}
{"id":"rush-scr.10","title":"SCRIPT-010: unset builtin","description":"As a script writer, I need the unset builtin to remove variables and functions.\n\n## Priority: P1 - HIGH\nNeeded for cleanup and variable management.\n\n## Acceptance Criteria\n- [ ] `unset var` removes variable\n- [ ] `unset -v var` removes variable (explicit)\n- [ ] `unset -f func` removes function\n- [ ] Multiple arguments: `unset a b c`\n- [ ] No error if variable doesn't exist\n- [ ] Cannot unset readonly variables\n- [ ] cargo test passes\n- [ ] cargo build --release succeeds\n- [ ] cargo clippy -- -D warnings passes\n\n## Use Cases\n```bash\n# Remove variable\nexport TEMP_VAR=value\necho $TEMP_VAR  # value\nunset TEMP_VAR\necho $TEMP_VAR  # empty\n\n# Remove multiple\na=1 b=2 c=3\nunset a b c\n\n# Remove function\nmyfunc() { echo hello; }\nunset -f myfunc\nmyfunc  # command not found\n\n# Cleanup pattern\ntrap 'unset TEMP_DIR TEMP_FILE' EXIT\n```\n\n## Technical Implementation\n- Add to src/builtins/mod.rs\n- Runtime.remove_variable(name)\n- Runtime.remove_function(name) (when functions exist)\n- Check readonly status before removing\n\n## Testing\n- Unset variable\n- Unset multiple variables\n- Unset function\n- Unset nonexistent (no error)\n- Readonly protection\n\n## Estimated Effort: 1 day","status":"open","priority":2,"issue_type":"task","owner":"a@kf.cafe","created_at":"2026-01-20T19:00:00-08:00","created_by":"Asher","updated_at":"2026-01-20T19:00:00-08:00","labels":["builtin","p1","scripting"],"dependencies":[{"issue_id":"rush-scr.10","depends_on_id":"rush-scr","type":"parent-child","created_at":"2026-01-20T19:00:00-08:00","created_by":"Asher"}]}
{"id":"rush-scr.11","title":"SCRIPT-011: command builtin","description":"As a script writer, I need the command builtin to bypass aliases and functions.\n\n## Priority: P2 - MEDIUM\nUseful for avoiding alias/function conflicts.\n\n## Acceptance Criteria\n- [ ] `command cmd` runs external command, bypassing aliases/functions\n- [ ] `command -v cmd` shows path to command\n- [ ] `command -V cmd` verbose description\n- [ ] Works with builtins (runs builtin)\n- [ ] Exit code from executed command\n- [ ] cargo test passes\n- [ ] cargo build --release succeeds\n- [ ] cargo clippy -- -D warnings passes\n\n## Use Cases\n```bash\n# Bypass alias\nalias ls='ls --color'\ncommand ls  # Runs /bin/ls without --color\n\n# Check if command exists\nif command -v git \u003e /dev/null; then\n  echo \"Git is installed\"\nfi\n\n# Get command path\ncommand -v python3  # /usr/bin/python3\n\n# Verbose info\ncommand -V cd\n# cd is a shell builtin\n```\n\n## Technical Implementation\n- Add to src/builtins/command.rs\n- Skip alias/function lookup in executor\n- -v flag: search PATH, return path\n- -V flag: return detailed description\n\n## Testing\n- Bypass alias\n- Bypass function\n- -v flag\n- -V flag\n- With builtins\n\n## Estimated Effort: 1 day","status":"open","priority":3,"issue_type":"task","owner":"a@kf.cafe","created_at":"2026-01-20T19:00:00-08:00","created_by":"Asher","updated_at":"2026-01-20T19:00:00-08:00","labels":["builtin","p2","scripting"],"dependencies":[{"issue_id":"rush-scr.11","depends_on_id":"rush-scr","type":"parent-child","created_at":"2026-01-20T19:00:00-08:00","created_by":"Asher"}]}
{"id":"rush-scr.12","title":"SCRIPT-012: builtin builtin","description":"As a script writer, I need the builtin builtin to force execution of builtins even when shadowed.\n\n## Priority: P2 - MEDIUM\nUseful for avoiding function conflicts with builtins.\n\n## Acceptance Criteria\n- [ ] `builtin cmd` runs builtin, bypassing functions\n- [ ] Error if command is not a builtin\n- [ ] Exit code from builtin\n- [ ] Works with all builtins\n- [ ] cargo test passes\n- [ ] cargo build --release succeeds\n- [ ] cargo clippy -- -D warnings passes\n\n## Use Cases\n```bash\n# Function shadows builtin\ncd() {\n  echo \"Changing to $1\"\n  builtin cd \"$1\"  # Call actual cd builtin\n}\n\n# Force builtin\nbuiltin echo \"This is the builtin echo\"\n\n# Error on non-builtin\nbuiltin git status  # Error: git is not a builtin\n```\n\n## Technical Implementation\n- Add to src/builtins/mod.rs\n- Check if command is builtin\n- Execute builtin directly\n- Error if not builtin\n\n## Testing\n- Run builtins\n- Error on non-builtin\n- Shadow function test\n\n## Estimated Effort: 4 hours","status":"open","priority":3,"issue_type":"task","owner":"a@kf.cafe","created_at":"2026-01-20T19:00:00-08:00","created_by":"Asher","updated_at":"2026-01-20T19:00:00-08:00","labels":["builtin","p2","scripting"],"dependencies":[{"issue_id":"rush-scr.12","depends_on_id":"rush-scr","type":"parent-child","created_at":"2026-01-20T19:00:00-08:00","created_by":"Asher"}]}
{"id":"rush-scr.13","title":"SCRIPT-013: kill builtin","description":"As a script writer, I need the kill builtin to send signals to processes.\n\n## Priority: P2 - MEDIUM\nUseful for process management in scripts.\n\n## Acceptance Criteria\n- [ ] `kill pid` sends SIGTERM\n- [ ] `kill -SIGNAL pid` sends specific signal\n- [ ] `kill -9 pid` sends SIGKILL\n- [ ] `kill -l` lists signal names\n- [ ] Multiple PIDs: `kill -9 1234 5678`\n- [ ] Job specs: `kill %1`\n- [ ] Error on invalid PID\n- [ ] cargo test passes\n- [ ] cargo build --release succeeds\n- [ ] cargo clippy -- -D warnings passes\n\n## Use Cases\n```bash\n# Terminate process\nkill 12345\n\n# Force kill\nkill -9 12345\nkill -KILL 12345\n\n# Graceful shutdown\nkill -TERM 12345\n\n# List signals\nkill -l\n\n# Kill job\nkill %1\n```\n\n## Technical Implementation\n- Add to src/builtins/kill.rs\n- Use libc::kill() or nix::sys::signal\n- Parse signal names and numbers\n- Integrate with job control\n\n## Testing\n- Send signals\n- Signal name parsing\n- Multiple PIDs\n- Job specs\n- Error handling\n\n## Estimated Effort: 1 day","status":"open","priority":3,"issue_type":"task","owner":"a@kf.cafe","created_at":"2026-01-20T19:00:00-08:00","created_by":"Asher","updated_at":"2026-01-20T19:00:00-08:00","labels":["builtin","p2","process-management","scripting"],"dependencies":[{"issue_id":"rush-scr.13","depends_on_id":"rush-scr","type":"parent-child","created_at":"2026-01-20T19:00:00-08:00","created_by":"Asher"}]}
{"id":"rush-scr.14","title":"SCRIPT-014: wait builtin","description":"As a script writer, I need the wait builtin to wait for background jobs to complete.\n\n## Priority: P2 - MEDIUM\nCompletes job control functionality.\n\n## Acceptance Criteria\n- [ ] `wait` waits for all background jobs\n- [ ] `wait pid` waits for specific process\n- [ ] `wait %job` waits for specific job\n- [ ] Returns exit code of waited process\n- [ ] Error if PID doesn't exist\n- [ ] Works with multiple PIDs\n- [ ] cargo test passes\n- [ ] cargo build --release succeeds\n- [ ] cargo clippy -- -D warnings passes\n\n## Use Cases\n```bash\n# Wait for background job\nsleep 5 \u0026\njob=$!\necho \"Waiting...\"\nwait $job\necho \"Done\"\n\n# Wait for all jobs\nsleep 3 \u0026\nsleep 5 \u0026\nwait  # Waits for both\n\n# Get exit code\nfalse \u0026\njob=$!\nwait $job\necho $?  # 1\n```\n\n## Technical Implementation\n- Add to src/builtins/wait.rs\n- Use libc::waitpid() or std::process::Child::wait()\n- Integrate with job manager\n- Track job PIDs\n\n## Testing\n- Wait for single job\n- Wait for all jobs\n- Exit code propagation\n- Error on invalid PID\n\n## Estimated Effort: 1 day","status":"open","priority":3,"issue_type":"task","owner":"a@kf.cafe","created_at":"2026-01-20T19:00:00-08:00","created_by":"Asher","updated_at":"2026-01-20T19:00:00-08:00","labels":["builtin","job-control","p2","scripting"],"dependencies":[{"issue_id":"rush-scr.14","depends_on_id":"rush-scr","type":"parent-child","created_at":"2026-01-20T19:00:00-08:00","created_by":"Asher"}]}
{"id":"rush-scr.15","title":"SCRIPT-015: pushd/popd/dirs builtins","description":"As a power user, I need directory stack commands for easy navigation.\n\n## Priority: P3 - NICE TO HAVE\nQuality of life feature for directory navigation.\n\n## Acceptance Criteria\n- [ ] `pushd dir` pushes current dir and changes to new dir\n- [ ] `popd` pops directory stack and changes to it\n- [ ] `dirs` shows directory stack\n- [ ] `dirs -c` clears stack\n- [ ] `pushd` with no args swaps top two dirs\n- [ ] Stack persists in session\n- [ ] cargo test passes\n- [ ] cargo build --release succeeds\n- [ ] cargo clippy -- -D warnings passes\n\n## Use Cases\n```bash\n# Navigate with stack\ncd /usr/local\npushd /tmp        # Now in /tmp, stack: /usr/local\npushd /home       # Now in /home, stack: /usr/local /tmp\ndirs              # /home /tmp /usr/local\npopd              # Back to /tmp\npopd              # Back to /usr/local\n\n# Quick swap\npushd /var/log\npushd /etc\npushd             # Swap /etc and /var/log\n```\n\n## Technical Implementation\n- Add to src/builtins/dirs.rs\n- Runtime stores Vec\u003cPathBuf\u003e directory stack\n- pushd: push current, cd to new\n- popd: pop and cd\n- dirs: display stack\n\n## Testing\n- Push directories\n- Pop directories\n- Display stack\n- Clear stack\n- Swap behavior\n\n## Estimated Effort: 1 day","status":"open","priority":4,"issue_type":"task","owner":"a@kf.cafe","created_at":"2026-01-20T19:00:00-08:00","created_by":"Asher","updated_at":"2026-01-20T19:00:00-08:00","labels":["builtin","navigation","p3","scripting"],"dependencies":[{"issue_id":"rush-scr.15","depends_on_id":"rush-scr","type":"parent-child","created_at":"2026-01-20T19:00:00-08:00","created_by":"Asher"}]}
{"id":"rush-scr.2","title":"SCRIPT-002: true/false builtins","description":"As a shell scripter, I need true and false builtins so I can write conditionals and infinite loops.\n\n## Priority: P0 - CRITICAL\nEssential for any conditional logic or loops.\n\n## Acceptance Criteria\n- [ ] `true` always exits with code 0\n- [ ] `false` always exits with code 1\n- [ ] Work in conditionals: `if true; then echo yes; fi`\n- [ ] Work in loops: `while true; do echo loop; sleep 1; done`\n- [ ] Work with \u0026\u0026 and ||: `true \u0026\u0026 echo yes`, `false || echo no`\n- [ ] Ignore all arguments (POSIX behavior)\n- [ ] cargo test passes\n- [ ] cargo build --release succeeds\n- [ ] cargo clippy -- -D warnings passes\n\n## Use Cases\n```bash\n# Infinite loop\nwhile true; do\n  echo \"Running...\"\n  sleep 1\ndone\n\n# Conditionals\nif true; then\n  echo \"This always runs\"\nfi\n\n# Logic\ntrue \u0026\u0026 echo \"Success\" || echo \"Failure\"\nfalse \u0026\u0026 echo \"Won't print\" || echo \"Will print\"\n```\n\n## Technical Implementation\n- Add to src/builtins/mod.rs as simple functions\n- `builtin_true` returns ExecutionResult with exit_code 0\n- `builtin_false` returns ExecutionResult with exit_code 1\n- No stdout/stderr output\n\n## Testing\n- Exit codes\n- Use in conditionals\n- Use in loops\n- With \u0026\u0026 and ||\n\n## Estimated Effort: 1 hour","status":"open","priority":1,"issue_type":"task","owner":"a@kf.cafe","created_at":"2026-01-20T19:00:00-08:00","created_by":"Asher","updated_at":"2026-01-20T19:00:00-08:00","labels":["builtin","critical","p0","scripting"],"dependencies":[{"issue_id":"rush-scr.2","depends_on_id":"rush-scr","type":"parent-child","created_at":"2026-01-20T19:00:00-08:00","created_by":"Asher"}]}
{"id":"rush-scr.3","title":"SCRIPT-003: return builtin","description":"As a shell function writer, I need the return builtin so I can exit functions with specific exit codes.\n\n## Priority: P0 - CRITICAL\nCan't write useful functions without return.\n\n## Acceptance Criteria\n- [ ] `return` exits current function with code 0\n- [ ] `return N` exits with code N\n- [ ] Only works inside functions (error otherwise)\n- [ ] Also works in sourced scripts\n- [ ] Exit code available in $?\n- [ ] cargo test passes\n- [ ] cargo build --release succeeds\n- [ ] cargo clippy -- -D warnings passes\n\n## Use Cases\n```bash\ncheck_file() {\n  if [ -f \"$1\" ]; then\n    return 0  # success\n  else\n    return 1  # failure\n  fi\n}\n\nif check_file \"data.txt\"; then\n  echo \"File exists\"\nfi\n\n# Early return\nprocess() {\n  [ -z \"$1\" ] \u0026\u0026 return 1\n  echo \"Processing $1\"\n  return 0\n}\n```\n\n## Technical Implementation\n- Add to src/builtins/mod.rs\n- Needs function call stack tracking\n- Throw special error/signal to unwind to function boundary\n- Set exit code in runtime\n\n## Dependencies\n- Requires function call stack in Runtime\n- May need special ExecutionResult variant for Return\n\n## Testing\n- Return from function\n- Return with exit code\n- Error when not in function\n- Use in sourced scripts\n\n## Estimated Effort: 1 day","status":"open","priority":1,"issue_type":"task","owner":"a@kf.cafe","created_at":"2026-01-20T19:00:00-08:00","created_by":"Asher","updated_at":"2026-01-20T19:00:00-08:00","labels":["builtin","critical","functions","p0","scripting"],"dependencies":[{"issue_id":"rush-scr.3","depends_on_id":"rush-scr","type":"parent-child","created_at":"2026-01-20T19:00:00-08:00","created_by":"Asher"}]}
{"id":"rush-scr.4","title":"SCRIPT-004: local builtin","description":"As a function writer, I need the local builtin so I can create function-scoped variables that don't leak.\n\n## Priority: P0 - CRITICAL\nEssential for writing clean, non-leaking functions.\n\n## Acceptance Criteria\n- [ ] `local var=value` creates function-scoped variable\n- [ ] `local var` declares without assignment\n- [ ] Multiple declarations: `local a=1 b=2 c=3`\n- [ ] Only works inside functions (error otherwise)\n- [ ] Variables don't leak outside function\n- [ ] Shadows global variables\n- [ ] Restored on function exit\n- [ ] cargo test passes\n- [ ] cargo build --release succeeds\n- [ ] cargo clippy -- -D warnings passes\n\n## Use Cases\n```bash\nprocess() {\n  local temp=\"processing\"\n  local count=0\n  \n  echo \"$temp\"\n  count=$((count + 1))\n  echo \"Count: $count\"\n}\n\nprocess\necho \"$temp\"   # Empty - not leaked\necho \"$count\"  # Empty - not leaked\n\n# Shadowing\nname=\"global\"\ntest_shadow() {\n  local name=\"local\"\n  echo \"Inside: $name\"  # local\n}\ntest_shadow\necho \"Outside: $name\"  # global\n```\n\n## Technical Implementation\n- Add to src/builtins/mod.rs\n- Runtime needs function variable scopes (stack)\n- Push scope on function entry\n- Pop scope on function exit\n- Variable lookup checks scopes in order (local → global)\n\n## Dependencies\n- Requires function call stack in Runtime\n- May need scope tracking in Runtime\n\n## Testing\n- Local variable isolation\n- Shadowing behavior\n- Scope cleanup on exit\n- Error when not in function\n- Multiple locals\n\n## Estimated Effort: 2 days","status":"open","priority":1,"issue_type":"task","owner":"a@kf.cafe","created_at":"2026-01-20T19:00:00-08:00","created_by":"Asher","updated_at":"2026-01-20T19:00:00-08:00","labels":["builtin","critical","functions","p0","scripting"],"dependencies":[{"issue_id":"rush-scr.4","depends_on_id":"rush-scr","type":"parent-child","created_at":"2026-01-20T19:00:00-08:00","created_by":"Asher"}]}
{"id":"rush-scr.5","title":"SCRIPT-005: shift builtin","description":"As a script writer, I need the shift builtin so I can process positional parameters in loops.\n\n## Priority: P0 - CRITICAL\nEssential for processing command-line arguments.\n\n## Acceptance Criteria\n- [ ] `shift` removes $1, shifts all params left\n- [ ] `shift N` shifts N parameters\n- [ ] Updates $#, $@, $*\n- [ ] Error if shift count \u003e param count\n- [ ] Works in functions and scripts\n- [ ] cargo test passes\n- [ ] cargo build --release succeeds\n- [ ] cargo clippy -- -D warnings passes\n\n## Use Cases\n```bash\n# Process all arguments\nwhile [ $# -gt 0 ]; do\n  echo \"Arg: $1\"\n  shift\ndone\n\n# Shift multiple\nshift 2  # Skip first two args\necho \"Remaining: $@\"\n\n# In functions\nprocess_args() {\n  local cmd=$1\n  shift\n  echo \"Command: $cmd\"\n  echo \"Args: $@\"\n}\n\nprocess_args build --release --verbose\n# Command: build\n# Args: --release --verbose\n```\n\n## Technical Implementation\n- Add to src/builtins/mod.rs\n- Runtime needs to track positional parameters\n- Modify parameter array in place\n- Update $# special variable\n\n## Dependencies\n- Requires positional parameter tracking in Runtime\n- Needs $# special variable support\n\n## Testing\n- Shift one parameter\n- Shift multiple parameters\n- Shift in loops\n- Error on over-shift\n- Use in functions\n\n## Estimated Effort: 1 day","status":"open","priority":1,"issue_type":"task","owner":"a@kf.cafe","created_at":"2026-01-20T19:00:00-08:00","created_by":"Asher","updated_at":"2026-01-20T19:00:00-08:00","labels":["builtin","critical","p0","scripting"],"dependencies":[{"issue_id":"rush-scr.5","depends_on_id":"rush-scr","type":"parent-child","created_at":"2026-01-20T19:00:00-08:00","created_by":"Asher"}]}
{"id":"rush-scr.6","title":"SCRIPT-006: trap builtin","description":"As a script writer, I need the trap builtin so I can handle signals and run cleanup code on exit.\n\n## Priority: P1 - HIGH\nEssential for robust scripts with cleanup.\n\n## Acceptance Criteria\n- [ ] `trap 'command' SIGNAL` sets signal handler\n- [ ] `trap 'command' EXIT` runs on shell exit\n- [ ] Support common signals: INT, TERM, HUP, EXIT, ERR\n- [ ] `trap - SIGNAL` removes trap\n- [ ] `trap` with no args lists all traps\n- [ ] Traps inherited by subshells\n- [ ] cargo test passes\n- [ ] cargo build --release succeeds\n- [ ] cargo clippy -- -D warnings passes\n\n## Use Cases\n```bash\n# Cleanup on exit\ntrap 'rm -f /tmp/$$-*' EXIT\n\n# Handle interrupts\ntrap 'echo \"Interrupted!\"; exit 1' INT\n\n# Cleanup function\ncleanup() {\n  echo \"Cleaning up...\"\n  rm -f temp_files\n}\ntrap cleanup EXIT\n\n# Error handler\ntrap 'echo \"Error on line $LINENO\"' ERR\n```\n\n## Technical Implementation\n- Add to src/builtins/trap.rs\n- Runtime stores trap handlers (HashMap\u003cSignal, String\u003e)\n- Signal handler integration (already exists)\n- Execute trap command when signal received\n- Special EXIT trap on shell exit\n\n## Testing\n- Trap signals\n- EXIT trap\n- Remove traps\n- List traps\n- Nested traps\n\n## Estimated Effort: 2 days","status":"open","priority":2,"issue_type":"task","owner":"a@kf.cafe","created_at":"2026-01-20T19:00:00-08:00","created_by":"Asher","updated_at":"2026-01-20T19:00:00-08:00","labels":["builtin","p1","scripting","signals"],"dependencies":[{"issue_id":"rush-scr.6","depends_on_id":"rush-scr","type":"parent-child","created_at":"2026-01-20T19:00:00-08:00","created_by":"Asher"}]}
{"id":"rush-scr.7","title":"SCRIPT-007: printf builtin","description":"As a script writer, I need the printf builtin for formatted output beyond what echo provides.\n\n## Priority: P1 - HIGH\nEcho is limited; printf is essential for proper formatting.\n\n## Acceptance Criteria\n- [ ] Format strings: `printf \"%s %d\\n\" \"count\" 42`\n- [ ] Format specifiers: %s, %d, %f, %x, %o\n- [ ] Width and precision: %10s, %.2f\n- [ ] Escape sequences: \\n, \\t, \\\\, \\'\n- [ ] Multiple arguments reuse format\n- [ ] No automatic newline (unlike echo)\n- [ ] cargo test passes\n- [ ] cargo build --release succeeds\n- [ ] cargo clippy -- -D warnings passes\n\n## Use Cases\n```bash\n# Formatted output\nprintf \"Name: %s, Age: %d\\n\" \"Alice\" 30\n\n# Aligned columns\nprintf \"%-20s %10s\\n\" \"Item\" \"Price\"\nprintf \"%-20s %10.2f\\n\" \"Apple\" 1.99\nprintf \"%-20s %10.2f\\n\" \"Banana\" 0.59\n\n# Hex and octal\nprintf \"Hex: %x, Octal: %o\\n\" 255 255\n\n# Reuse format\nprintf \"%s\\n\" one two three\n# one\n# two  \n# three\n```\n\n## Technical Implementation\n- Add to src/builtins/printf.rs\n- Parse format string\n- Handle format specifiers\n- Type conversion (string to int/float)\n- Escape sequence handling\n\n## Testing\n- All format specifiers\n- Width and precision\n- Escape sequences\n- Multiple arguments\n- Error handling\n\n## Estimated Effort: 2 days","status":"open","priority":2,"issue_type":"task","owner":"a@kf.cafe","created_at":"2026-01-20T19:00:00-08:00","created_by":"Asher","updated_at":"2026-01-20T19:00:00-08:00","labels":["builtin","formatting","p1","scripting"],"dependencies":[{"issue_id":"rush-scr.7","depends_on_id":"rush-scr","type":"parent-child","created_at":"2026-01-20T19:00:00-08:00","created_by":"Asher"}]}
{"id":"rush-scr.8","title":"SCRIPT-008: eval builtin","description":"As a script writer, I need the eval builtin to execute dynamically constructed commands.\n\n## Priority: P1 - HIGH\nSometimes necessary evil for advanced scripting.\n\n## Acceptance Criteria\n- [ ] `eval command` executes string as command\n- [ ] Variable expansion before execution\n- [ ] Command substitution works\n- [ ] Exit code from evaluated command\n- [ ] Works with complex commands (pipes, redirects)\n- [ ] Security warning in help text\n- [ ] cargo test passes\n- [ ] cargo build --release succeeds\n- [ ] cargo clippy -- -D warnings passes\n\n## Use Cases\n```bash\n# Dynamic command\ncmd=\"ls -la\"\neval $cmd\n\n# Variable indirection\nvar=\"HOME\"\neval echo \\$$var  # Prints $HOME value\n\n# Dynamic pipes\nop=\"| grep foo\"\neval \"cat file.txt $op\"\n\n# Build command from parts\nflags=\"-a -l\"\neval ls $flags /tmp\n```\n\n## Technical Implementation\n- Add to src/builtins/mod.rs\n- Concatenate arguments into string\n- Parse and execute as new command\n- Return execution result\n\n## Security Notes\n- Document eval dangers\n- Warn about injection risks\n- Recommend alternatives when possible\n\n## Testing\n- Simple eval\n- Variable expansion\n- Command substitution\n- Complex commands\n- Edge cases\n\n## Estimated Effort: 1 day","status":"open","priority":2,"issue_type":"task","owner":"a@kf.cafe","created_at":"2026-01-20T19:00:00-08:00","created_by":"Asher","updated_at":"2026-01-20T19:00:00-08:00","labels":["builtin","p1","scripting"],"dependencies":[{"issue_id":"rush-scr.8","depends_on_id":"rush-scr","type":"parent-child","created_at":"2026-01-20T19:00:00-08:00","created_by":"Asher"}]}
{"id":"rush-scr.9","title":"SCRIPT-009: exec builtin","description":"As a script writer, I need the exec builtin to replace the shell process or redirect file descriptors permanently.\n\n## Priority: P1 - HIGH\nNeeded for advanced scripting and performance optimization.\n\n## Acceptance Criteria\n- [ ] `exec command` replaces shell with command\n- [ ] No return from exec (process replaced)\n- [ ] `exec \u003e file` redirects stdout permanently\n- [ ] `exec 2\u003e\u00261` redirects stderr to stdout permanently\n- [ ] `exec \u003c file` redirects stdin permanently\n- [ ] Works in scripts and functions\n- [ ] cargo test passes\n- [ ] cargo build --release succeeds\n- [ ] cargo clippy -- -D warnings passes\n\n## Use Cases\n```bash\n# Replace shell with command\nexec ./myprogram args  # Shell exits, myprogram runs\n\n# Permanent redirection\nexec \u003e output.log 2\u003e\u00261\necho \"This goes to log\"  # All subsequent output to log\n\n# Redirect stdin\nexec \u003c input.txt\nwhile read line; do\n  echo \"$line\"\ndone\n\n# Init script pattern\nif [ -f ./server ]; then\n  exec ./server  # Replace init with server\nfi\n```\n\n## Technical Implementation\n- Add to src/builtins/mod.rs\n- For command: use std::process::Command::exec() (Unix)\n- For redirects: dup2() file descriptors\n- Store redirect state in Runtime\n\n## Platform Notes\n- exec command replacement is Unix-only\n- File descriptor redirection works cross-platform\n\n## Testing\n- Exec command (process replacement)\n- Stdout redirection\n- Stderr redirection\n- Stdin redirection\n- Combined redirects\n\n## Estimated Effort: 2 days","status":"open","priority":2,"issue_type":"task","owner":"a@kf.cafe","created_at":"2026-01-20T19:00:00-08:00","created_by":"Asher","updated_at":"2026-01-20T19:00:00-08:00","labels":["builtin","p1","scripting"],"dependencies":[{"issue_id":"rush-scr.9","depends_on_id":"rush-scr","type":"parent-child","created_at":"2026-01-20T19:00:00-08:00","created_by":"Asher"}]}
{"id":"rush-tlg","title":"Add sed and awk alternative builtins","description":"Implement fast Rust-based alternatives to sed and awk for text processing: 1) Basic sed functionality (substitution, deletion), 2) Common awk patterns (field splitting, pattern matching), 3) Maintain compatibility with common use cases, 4) Leverage Rust performance","status":"open","priority":2,"issue_type":"feature","owner":"a@kf.cafe","created_at":"2026-01-20T03:03:12.817641-08:00","created_by":"Asher","updated_at":"2026-01-20T03:03:12.817641-08:00","labels":["enhancement","phase4"]}
{"id":"rush-uniq.1","title":"UNIQUE-001: bench builtin","description":"As a performance-conscious developer, I want a built-in benchmarking tool so I can quickly measure command performance.\n\n## Priority: P3 - NICE TO HAVE\nUnique to Rush - differentiation feature.\n\n## Acceptance Criteria\n- [ ] `bench command` runs command N times and shows stats\n- [ ] Shows: mean, min, max, stddev\n- [ ] Warmup runs (exclude from stats)\n- [ ] Configurable iterations: `bench -n 100 command`\n- [ ] Optional comparison: `bench cmd1 vs cmd2`\n- [ ] Clean, readable output\n- [ ] cargo test passes\n- [ ] cargo build --release succeeds\n- [ ] cargo clippy -- -D warnings passes\n\n## Use Cases\n```bash\n# Quick benchmark\nbench find . -name \"*.rs\"\n# Iterations: 10\n# Mean:   45.2ms\n# Min:    42.1ms\n# Max:    51.3ms\n# Stddev:  2.8ms\n\n# Compare commands\nbench \"rush -c 'cat file | grep foo'\" vs \"bash -c 'cat file | grep foo'\"\n# rush:  4.5ms (baseline)\n# bash: 12.3ms (2.7x slower)\n\n# Custom iterations\nbench -n 100 echo hello\n```\n\n## Technical Implementation\n- Add to src/builtins/bench.rs\n- Use std::time::Instant for timing\n- Calculate statistics (mean, stddev)\n- Format output nicely\n- Optional: integration with criterion\n\n## Differentiation\n- Built-in hyperfine equivalent\n- Faster than external tools\n- Rush-specific optimizations\n- Great for demos and HN posts\n\n## Testing\n- Benchmark accuracy\n- Statistics calculation\n- Comparison mode\n- Edge cases\n\n## Estimated Effort: 2 days","status":"open","priority":4,"issue_type":"feature","owner":"a@kf.cafe","created_at":"2026-01-20T19:00:00-08:00","created_by":"Asher","updated_at":"2026-01-20T19:00:00-08:00","labels":["benchmarking","builtin","differentiation","p3","unique"]}
{"id":"rush-uniq.2","title":"UNIQUE-002: watch builtin","description":"As a developer, I want a built-in watch command so I can monitor command output over time.\n\n## Priority: P3 - NICE TO HAVE\nUnique to Rush - quality of life feature.\n\n## Acceptance Criteria\n- [ ] `watch command` runs command every 2 seconds\n- [ ] `watch -n N command` custom interval\n- [ ] Clear screen between runs\n- [ ] Show timestamp and iteration count\n- [ ] Ctrl-C to exit\n- [ ] Highlight changes (optional)\n- [ ] Exit on error (optional: -e flag)\n- [ ] cargo test passes\n- [ ] cargo build --release succeeds\n- [ ] cargo clippy -- -D warnings passes\n\n## Use Cases\n```bash\n# Watch test results\nwatch cargo test\n\n# Monitor git status\nwatch -n 1 git status\n\n# Watch file changes\nwatch \"ls -l | grep myfile\"\n\n# Exit on error\nwatch -e \"cargo build \u0026\u0026 cargo test\"\n```\n\n## Technical Implementation\n- Add to src/builtins/watch.rs\n- Loop with sleep interval\n- Clear terminal between runs\n- Execute command and capture output\n- Optional: diff highlighting\n\n## Differentiation\n- Built-in GNU watch equivalent\n- Faster startup than external watch\n- Integrated with Rush builtins\n- Better error messages\n\n## Testing\n- Basic watching\n- Custom intervals\n- Exit on error\n- Ctrl-C handling\n\n## Estimated Effort: 1 day","status":"open","priority":4,"issue_type":"feature","owner":"a@kf.cafe","created_at":"2026-01-20T19:00:00-08:00","created_by":"Asher","updated_at":"2026-01-20T19:00:00-08:00","labels":["builtin","differentiation","monitoring","p3","unique"]}
{"id":"rush-vlf","title":"Implement cross-session history sync","description":"Add history synchronization across multiple Rush sessions: 1) Real-time or periodic sync, 2) Conflict resolution for concurrent edits, 3) Optional cloud sync support, 4) Privacy controls, 5) Session-specific vs global history","status":"open","priority":3,"issue_type":"feature","owner":"a@kf.cafe","created_at":"2026-01-20T03:03:31.817197-08:00","created_by":"Asher","updated_at":"2026-01-20T03:03:31.817197-08:00","labels":["enhancement","phase5"]}
